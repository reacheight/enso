"use strict";(self.webpackChunktelegram_t=self.webpackChunktelegram_t||[]).push([[3938],{101:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(84051),i=n(87679),a=n(56863);function s(e){const t=(0,o.li)(),{result:n}=(0,a.A)(()=>{if(!e)return Promise.resolve(void 0);t.current&&URL.revokeObjectURL(t.current);const n=URL.createObjectURL(e);return t.current=n,(0,i.NN)(n)},[e]);return(0,o.vJ)(()=>()=>{t.current&&(URL.revokeObjectURL(t.current),t.current=void 0)},[]),{image:n}}},537:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(84051);function i(e,t){const n=(0,o.li)(0);return(0,o.Kr)(()=>{t||(n.current+=1)},[...e]),n.current}},10187:(e,t,n)=>{n.d(t,{A:()=>p});var o=n(84051),i=n(13439),a=n(70636),s=n(57639),c=n(87357),r=n(35049),l=n(59030),d=n(21849),u=n(34431),h=n(18276);var m=n(20021);const p=(0,o.ph)((0,i.EK)((e,{peerId:t,forceShowSelf:n})=>{if(!t)return{peer:void 0,isSavedMessages:void 0};const o=(0,s.PVB)(e,t),i=(0,s.mBe)(e,t);return{peer:o,isSavedMessages:!n&&i&&i.isSelf}})(({icon:e,title:t,isMinimized:n,canClose:o,isCloseNonDestructive:i,clickArg:s,peer:p,mockPeer:g,customPeer:A,className:f,isSavedMessages:v,withPeerColors:C,withEmojiStatus:y,onClick:I,itemClassName:S})=>{const w=(0,l.A)(),R=g||p,N=A||R,M=R&&(0,a.vj)(R)?R:void 0;let b,k,Y;e&&t?(b=(0,m.Y)("div",{className:"NtoGLT22",children:(0,m.Y)(h.A,{name:e,style:"f91Ad80i"})}),k=t):N&&(b=(0,m.Y)(d.A,{className:"La8BQ9yr",peer:N,size:"small",isSavedMessages:v}),Y=(0,a.F9)(w,N)||t,k=t||(0,m.Y)(u.A,{peer:N,isSavedMessages:v,withEmojiStatus:y}));const x=(0,c.A)("_Lq6_4e5",(M?.isForum||A?.isAvatarSquare)&&"JIHfTUVn",n&&"UhOZvxvs",o&&"uvvgSFUJ",i&&"fAk5yEeV",!I&&"P8r3OoaX",C&&(0,r.y)(A||p),f);return(0,m.FD)("div",{className:x,onClick:()=>I?.(s),title:n?Y:void 0,dir:w.isRtl?"rtl":void 0,children:[b,!n&&(0,m.Y)("div",{className:(0,c.A)("XPVuH29G",S),dir:"auto",children:k}),o&&(0,m.Y)("div",{className:"xVPG2UTy",children:(0,m.Y)(h.A,{name:"close"})})]})}))},11241:(e,t,n)=>{n.d(t,{A:()=>N});var o=n(84051),i=n(13439),a=n(90709),s=n(57639),c=n(87357),r=n(43336),l=n(76023),d=n(37661),u=n(5912),h=n(17712),m=n(62587),p=n(50680),g=n(47483),A=n(18104),f=n(87412),v=n(83594),C=n(17794),y=n(93879),I=n(20021);const S=1.5*l.$,w=6.5*l.$,R=l.$,N=(0,o.ph)((0,i.EK)((e,{containerId:t})=>{const{genericEmojiEffects:n,reactions:o}=e,{activeReactions:i}=(0,s.nTw)(e),a=(0,s.xYJ)(e,"reactionEffects");return{activeReactions:i?.[t],availableReactions:o.availableReactions,genericEffects:n,withEffects:a}})(({containerId:e,reaction:t,className:n,size:s=S,effectSize:l=w,activeReactions:N,availableReactions:M,genericEffects:b,withEffects:k,withEffectOnly:Y,shouldPause:x,shouldLoop:P,loopLimit:T,observeIntersection:D})=>{const{stopActiveReaction:F}=(0,i.ko)(),L=(0,o.li)(),E="custom"===t.type,B=(0,o.Kr)(()=>M?.find(e=>(0,a.a0)(e.reaction,t)),[M,t]),O=B?.centerIcon?.id,{customEmoji:K}=(0,g.A)(E?t.documentId:void 0),_=(0,o.Kr)(()=>{if(!E)return B?.aroundAnimation?.id;if(!K)return;const e=M?.find(e=>e.reaction.emoticon===K.emoji)?.aroundAnimation?.id;return e},[B,M,K,E]),U=(0,o.Kr)(()=>{if(_)return _;if(!b?.stickers)return;const{stickers:e}=b;return e[Math.floor(Math.random()*e.length)].id},[_,b]),$=(0,u.Vz)(L,D),J=O&&(0,a.aL)(O),z=U&&(0,a.aL)(U),j=(0,m.A)(J),H=(0,m.A)(z),q=(0,o.Kr)(()=>N?.find(e=>(0,a.a0)(e,t)),[N,t]),G=Boolean(k&&q&&(E||j)&&H),V=$&&(G&&!Y||P),{shouldRender:W,transitionClassNames:X}=(0,p.A)(G,void 0,!0,"slow"),{shouldRender:Z,transitionClassNames:Q}=(0,p.A)(V,void 0,!0,"slow"),ee=(0,h.A)(()=>{F({containerId:e,reaction:t})}),[te,ne,oe]=(0,d.A)(),ie=!(E||V&&te),{shouldRender:ae,transitionClassNames:se}=(0,p.A)(ie,void 0,!0),ce=(0,c.A)(y.A.root,W&&y.A.animating,Y&&y.A.withEffectOnly,n);return(0,I.FD)("div",{className:ce,ref:L,children:[!Y&&ae&&(0,I.Y)(C.A,{className:se,reaction:t,availableReactions:M,size:s,observeIntersection:D}),!Y&&E&&(0,I.Y)(f.A,{documentId:t.documentId,className:y.A.customEmoji,size:s,noPlay:x,noVideoOnMobile:!0,loopLimit:T,observeIntersectionForPlaying:D,forceAlways:!0}),Z&&!E&&(0,I.Y)(A.A,{className:(0,c.A)(y.A.animatedIcon,Q),size:(0,r.Ki)(1.9*s),tgsUrl:j,play:$&&!x,noLoop:!P,onLoad:ne,onEnded:oe,forceAlways:!0},`${O}-${s}`),W&&(0,I.FD)(I.FK,{children:[(0,I.Y)(A.A,{className:(0,c.A)(y.A.effect,X),size:l,tgsUrl:H,play:$,noLoop:!0,onEnded:ee,forceAlways:!0},`${U}-${l}`),E&&!_&&$&&(0,I.Y)(v.A,{reaction:t,className:X,particleSize:Math.max(.5*s,R),onEnded:ee})]})]})}))},14622:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(84051),i=n(13439),a=n(81954),s=n(17712),c=n(93545),r=n(672);const l=function(e,t=!1){const{focusLastMessage:n}=(0,i.ko)(),l=(0,o.li)(0),d=(0,s.A)(e=>{const t=l.current,i=e.contentRect.height;if(l.current=i,(0,a.o8)()||!t||i<=t)return;const s=e.target.closest(".MessageList");if(!s)return;(0,o.VK)(400);const c=i-t,{offsetHeight:r,scrollHeight:d,scrollTop:u}=s;Math.round(d-u-r)-c<=5&&n()}),u=(0,r.A)(d,[d],300,!1);(0,c.A)(e,u,!t)}},14737:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(84051),i=n(17712);const a=function(e,t){const n=(0,i.A)(e);(0,o.vJ)(()=>{if("number"!=typeof t)return;const e=setTimeout(()=>n(),t);return()=>clearTimeout(e)},[t])}},15535:(e,t,n)=>{n.d(t,{A:()=>A});var o=n(84051),i=n(31481),a=n(66644),s=n(63495),c=n(96454),r=n(87357),l=n(83868),d=n(14737),u=n(43874),h=n(39351),m=n(64493),p=n(18276),g=n(20021);const A=(0,o.ph)(({isLoading:e=!1,isPasswordVisible:t,error:n,hint:A,placeholder:f,submitLabel:v,description:C,shouldShowSubmit:y,shouldResetValue:I,shouldDisablePasswordManager:S=!1,noRipple:w=!1,onClearError:R,onChangePasswordVisibility:N,onInputChange:M,onSubmit:b})=>{const k=(0,o.li)(),Y=(0,h.A)(),{isMobile:x}=(0,u.Ay)(),[P,T]=(0,o.J0)(""),[D,F]=(0,o.J0)(!1),L=x?550:400;return(0,o.vJ)(()=>{I&&T("")},[I]),(0,d.A)(()=>{c.TF||k.current.focus()},L),(0,o.vJ)(()=>{n&&(0,a.RK)(()=>{k.current.focus(),k.current.select()})},[n]),(0,g.FD)("form",{action:"",onSubmit:b?function(t){t.preventDefault(),e||D&&b(P)}:l.A,autoComplete:"off",children:[(0,g.FD)("div",{className:(0,r.A)("input-group password-input",P&&"touched",n&&"error"),dir:Y.isRtl?"rtl":void 0,children:[S&&(0,g.Y)("input",{type:"password",id:"prevent_autofill",autoComplete:"off",className:"visually-hidden",tabIndex:-2}),(0,g.Y)("input",{ref:k,className:"form-control",type:t?"text":"password",id:"sign-in-password",value:P||"",autoComplete:S?"one-time-code":"current-password",spellCheck:!s.Vq&&void 0,onChange:function(e){n&&R();const{target:t}=e;T(t.value),F(t.value.length>=i.AGC),M&&M(t.value)},maxLength:256,dir:"auto"}),(0,g.Y)("label",{children:n||A||f||Y("PasswordFormPlaceholder")}),(0,g.Y)("div",{className:"div-button toggle-password",onClick:function(){N(!t)},role:"button",tabIndex:0,title:Y("AriaPasswordToggle"),"aria-label":Y("AriaPasswordToggle"),children:(0,g.Y)(p.A,{name:t?"eye":"eye-crossed"})})]}),C&&(0,g.Y)("p",{className:"description",children:C}),b&&(D||y)&&(0,g.Y)(m.A,{type:"submit",ripple:!w,isLoading:e,disabled:!D,children:v||Y("PasswordFormSubmit")})]})})},15640:(e,t,n)=>{function o(e){return"touches"in e?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}n.d(t,{A:()=>o})},17794:(e,t,n)=>{n.d(t,{A:()=>h});var o=n(84051),i=n(90709),a=n(87357),s=n(62587),c=n(83057),r=n(87412),l=n(18276),d=n(61911),u=n(20021);const h=(0,o.ph)(({reaction:e,availableReactions:t,className:n,size:h,withIconHeart:m,observeIntersection:p})=>{const g=(0,o.Kr)(()=>t?.find(t=>(0,i.a0)(t.reaction,e)),[t,e]),A=g?.staticIcon?.id,f=A?`document${A}`:void 0,v=(0,s.A)(f),C=(0,c.A)(v),y="emoji"===e.type&&"🦄"===e.emoticon,I=m&&"emoji"===e.type&&"❤"===e.emoticon;return"custom"===e.type?(0,u.Y)(r.A,{documentId:e.documentId,className:(0,a.A)("ReactionStaticEmoji",n),size:h,observeIntersectionForPlaying:p}):I?(0,u.Y)(l.A,{name:"heart",className:"ReactionStaticEmoji",style:`font-size: ${h}px; width: ${h}px`}):(0,u.Y)("img",{className:(0,a.A)("ReactionStaticEmoji",y&&"with-unicorn-fix",C,n),style:h?`width: ${h}px; height: ${h}px`:void 0,src:v||d,alt:g?.title,draggable:!1})})},20333:(e,t,n)=>{n.d(t,{A:()=>y});var o=n(84051),i=n(87357),a=n(95807),s=n(76023),c=n(537),r=n(30857),l=n(59030),d=n(29886),u=n(93545),h=n(35297),m=n(41036),p=n(18276);const g="HS9PzRKt",A="_b5HgBXr",f="P6mch4bB",v="xdKGgbKQ";var C=n(20021);const y=(0,o.ph)(({leftText:e,rightText:t,floatingBadgeText:n,floatingBadgeIcon:y,progress:I=0,isPrimary:S,isNegative:w,animationDirection:R="none",className:N})=>{const M=(0,l.A)(),b=(0,o.li)(),k=(0,o.li)(),[Y,x]=(0,o.J0)(0),[P,T]=(0,o.J0)(0),[D,F]=(0,o.J0)(0),L=(0,d.A)(D),[E,B]=(0,o.J0)(w?0:I),[O,K]=(0,o.J0)(w?I:0),[_,U]=(0,o.J0)(I),[$,J]=(0,o.J0)(0),[z,j]=(0,o.J0)(!1),[H,q]=(0,o.J0)(!1),[G,V]=(0,o.J0)(!1),[W,X]=(0,o.J0)(!1),[Z,Q]=(0,o.J0)(!1),ee=(0,c.A)([n,y]),te=(0,o.li)(!1),ne=(0,d.A)(e),oe=(0,d.A)(t),ie=(0,d.A)(w),ae=14+s.$,se=1.5*s.$,ce=()=>{if(b.current&&k.current){const e=k.current.offsetWidth,t=D/2,n=t,o=e-t,i=14,a=w?(1-_)*e:_*e;let s=Math.max(n,Math.min(a,o));a<ae&&(s=a+t),a>e-ae&&(s=a-t);const c=t+(a-s)-i;x(s/e),T(c)}};(0,o.vJ)(ce,[_,D,w,ae]),(0,u.A)(k,ce),(0,o.vJ)(()=>{F((b?.current?.clientWidth||0)+se)},[n,y,se]);const re=(0,r.A)();(0,h.A)(()=>{let e;if((ne||oe)&&(void 0!==ie&&ie!==w||Z)&&!te.current){te.current=!0;const t=Z?800:400;e=window.setTimeout(()=>{te.current=!1,re()},t)}return()=>{e&&(clearTimeout(e),te.current=!1)}},[e,ne,t,oe,ie,w,R,Z]);const le=te.current;(0,o.vJ)(()=>{w?(B(0),K(I)):(K(0),B(I)),U(I)},[I,w]);const de=Boolean(y||n),ue=le?ne:e,he=le?oe:t,me=(0,d.A)(I);(0,o.vJ)(()=>{const e=[];if("none"===R||void 0===me)return;const t=I,n=e=>{w?K(e):B(e)};if("forward"===R||"backward"===R){const o="forward"===R;Q(!0),n(o?1:0),V(!0),J(o?0:1),e.push(window.setTimeout(()=>{V(!1),j(!0),J(t),o&&(q(!0),n(0))},400)),e.push(window.setTimeout(()=>{q(!0),V(!0),X(!1),n(t),j(!1),e.push(window.setTimeout(()=>{q(!1),V(!1),Q(!1)},50))},800))}return()=>{e.forEach(clearTimeout)}},[I,R,w,me,800]);const pe=(e,t,n,o)=>{const a=e?"MzFvyMb5":"S6H6hBpP";return(0,C.FD)("div",{className:(0,i.A)(a,n,o&&g),style:`--layer-progress: ${t}`,children:[(0,C.Y)("div",{className:A,children:(0,C.Y)("span",{children:ue})}),(0,C.Y)("div",{className:f,children:(0,C.Y)("span",{children:he})})]})};return(0,C.FD)("div",{ref:k,className:(0,i.A)("nY2ggBsF",de&&"RYtVQAjM",S&&"Zi0w7QJ3",w&&"dXs41qvC",le&&"I7toQztx",Z&&"SxTCkiyg",N),style:(0,a.A)(`--positive-progress: ${E}`,`--negative-progress: ${O}`,`--layer-progress: ${$}`,`--shift-x: ${Y}`,"--cycling-animation-badge-position: 800ms","--cycling-animation-progress: 400ms"),children:[de&&(0,C.Y)("div",{className:"dhigNjAq",children:(0,C.FD)("div",{className:"cOpfCGPh",children:[(0,C.Y)("div",{className:(0,i.A)("uNwBLNOy",(!L||0===L)&&g),style:`width: ${D}px;`,children:(0,C.Y)(m.Ay,{activeKey:ee,name:"fade",shouldCleanup:!0,children:(0,C.FD)("div",{ref:b,className:"W4rqGyJl",children:[y&&(0,C.Y)(p.A,{name:y,className:"MJ7MTmxi"}),n&&(0,C.Y)("div",{className:"MwzZt3Qo",dir:M.isRtl?"rtl":void 0,children:n})]})})}),(0,C.Y)("div",{className:"qRwO7SZm",style:`left: ${P}px`,children:(0,C.Y)("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",children:(0,C.Y)("path",{d:"m 28,4 v 9 c 0.0089,7.283278 -3.302215,5.319646 -6.750951,8.589815 l -5.8284,5.82843 c -0.781,0.78105 -2.0474,0.78104 -2.8284,0 L 6.7638083,21.589815 C 2.8288652,17.959047 0.04527024,20.332086 0,13 V 4 C 0,4 0.00150581,0.97697493 3,1 5.3786658,1.018266 22.594519,0.9142007 25,1 c 2.992326,0.1067311 3,3 3,3 z",fill:"currentColor"})})})]})}),(0,C.Y)("div",{className:A,children:(0,C.Y)("span",{children:ue})}),(0,C.Y)("div",{className:f,children:(0,C.Y)("span",{children:he})}),(0,C.FD)("div",{className:"_B4r3D5W",children:[pe(!0,E,(0,i.A)(W&&v),H),pe(!1,O,(0,i.A)(W&&v),H),pe(!w,$,(0,i.A)(w?"QZwWHVdB":"VmyTBAzN",z&&"tkyw4hXo"),G)]})]})})},24531:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(84051),i=n(31481),a=n(17663),s=n(80140),c=n(17712),r=n(59030),l=n(80089),d=n(80464),u=n(20021);const h=e=>{const{isOpen:t}=e,n=(0,d.A)(l.ar.Extra,"CalendarModal",!t);return n?(0,u.Y)(n,{...e}):void 0},m=(e,t,n,l)=>{const d=(0,r.A)(),[m,p]=(0,o.J0)(),g=(0,c.A)((e,t=!1)=>{const n=Math.round(Math.max(e.getTime(),Date.now()+6e4)/1e3)+(t?0:(0,s.SF)());m?.(n),p(void 0)}),A=(0,c.A)(()=>{g(new Date(1e3*i.NkL),!0)}),f=(0,c.A)(()=>{p(void 0),t?.()}),v=(0,c.A)(e=>{p(()=>e)}),C=n?new Date(1e3*n):new Date;C.setSeconds(0),C.setMilliseconds(0);const y=new Date;return y.setFullYear(y.getFullYear()+1),[v,(0,u.Y)(h,{isOpen:Boolean(m),withTimePicker:!0,selectedAt:C.getTime(),maxAt:(0,a.CS)(y),isFutureMode:!0,secondButtonLabel:e?d("Schedule.SendWhenOnline"):void 0,onClose:f,onSubmit:g,onSecondButtonClick:e?A:void 0,isRemindMe:l})]}},26875:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(84051),i=n(87357),a=n(59030),s=n(21849);var c=n(20021);const r=(0,o.ph)(({peers:e,size:t,className:n,limit:r=3,badgeText:l})=>{const d=(0,a.A)(),u="number"==typeof t?t:s.R[t],h=(0,o.Kr)(()=>l||(!e?.length||e.length<=r?void 0:"+"+(e.length-r)),[l,e,r]);return(0,c.FD)("div",{className:(0,i.A)(n,"kXs18Nmi"),style:`--_size: ${u}px;`,dir:d.isRtl?"rtl":"ltr",children:[e?.slice(0,r).map(e=>(0,c.Y)(s.A,{size:t,peer:e,className:"XND8fhC1"})),h&&(0,c.Y)("div",{className:"SHyAyGFO",children:h})]})})},27860:(e,t,n)=>{n.d(t,{A:()=>h});var o=n(84051),i=n(66644),a=n(87357),s=n(45470),c=n(39351),r=n(17712),l=n(50680),d=n(18276);var u=n(20021);const h=(0,o.ph)(({isVisible:e,withAnimation:t,thumbDataUri:n,isNsfw:h,className:m,width:p,height:g})=>{const A=(0,o.li)(),f=(0,c.A)(),{shouldRender:v,transitionClassNames:C}=(0,l.A)(e,void 0,!0,!t&&void 0,void 0,500),y=(0,s.A)(n,!v,void 0,25,p,g),I=(0,r.A)(e=>{if(!A.current)return;const t=A.current,n=e.currentTarget.getBoundingClientRect(),o=e.clientX-n.left,a=e.clientY-n.top,s=o-n.width/2,c=a-n.height/2;(0,i.RK)(()=>{t.setAttribute("style",`--click-shift-x: ${s}px; --click-shift-y: ${c}px`)})});if(v)return(0,u.FD)("div",{className:(0,a.A)("qF2WgYVg",C,m,t&&"pNM3cgkY"),ref:A,onClick:t?I:void 0,children:[(0,u.Y)("canvas",{ref:y,className:"eULqS2yR",width:p,height:g}),(0,u.Y)("div",{className:"XBor45hE"}),h&&(0,u.FD)("span",{className:"FJGQoa6s",children:[(0,u.Y)(d.A,{name:"eye-crossed-outline",className:"Y7JVRkxJ"}),f("MediaSpoilerSensitive")]})]})})},29886:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(84051);function i(e){const t=(0,o.li)(),n=(0,o.li)();return n.current!==e&&(t.current=n.current),n.current=e,t.current}},31460:(e,t,n)=>{n.d(t,{P:()=>a});var o=n(31481),i=n(96454);function a(e,t,n=!1,a=!1){return n||t===o.dnp?"none":t===o.zHL?"slideFade":"slideOptimized"===e?a?"slideOptimizedRtl":"slideOptimized":"slide"===e?a?"slideRtl":"slide":i.Ni?"slideFade":i.pz?"slideLayers":"pushSlide"}},31722:(e,t,n)=>{n.d(t,{A:()=>o});const o={container:"YmM5biTv",header:"S7WFT2bv",pickerCategoryTitle:"YK1300x2",peerChip:"gsKPBPoK",pickerList:"yLCbiItq",padded:"bXzIGw8s",noResults:"dXWKD0ve",onlineStatus:"d5GDOYh9"}},36838:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(84051);const i=(e,t,n=!1)=>{(0,o.vJ)(()=>{if(t)return;const o=e.current;function i(e){e.deltaX||(o.scrollLeft+=e.deltaY/4,n&&e.preventDefault())}return o.addEventListener("wheel",i,{passive:!n}),()=>{o.removeEventListener("wheel",i)}},[e,t,n])}},40558:(e,t,n)=>{n.d(t,{A:()=>g});var o=n(84051),i=n(66644),a=n(90709),s=n(87357),c=n(95807),r=n(87679),l=n(43336),d=n(17712),u=n(62587),h=n(93545),m=n(38691);var p=n(20021);const g=(0,o.ph)(({backgroundColors:e,patternColor:t,patternIcon:n,patternOpacity:g,clearBottomSector:A,className:f,patternSize:v=1})=>{const C=(0,o.li)(),y=(0,o.li)(),[I,S]=(0,o.Ul)({width:0,height:0}),w=(0,m.A)(),[R,N]=(0,o.J0)(),M=n&&(0,a.Mw)(n,"preview"),b=(0,u.A)(M);(0,o.vJ)(()=>{b&&(0,r.NN)(b).then(N)},[b]);const k=(0,o.Kr)(()=>{const e=[];for(let t=1;t<=3;t++){const n=Math.floor(8*(1+.5*(t-1))),o=t/3,i=.05+(.4-.05)*o,a=t%2==0?Math.PI/n:0;for(let t=0;t<n;t++){const s=t/n*Math.PI*2+a;if(A&&s>.45*Math.PI&&s<.55*Math.PI)continue;const c=1.71*i*Math.cos(s),r=i*Math.sin(s),l=1.4-o*Math.random();e.push({x:c,y:r,sizeFactor:l})}}return e},[A]);(0,h.A)(C,e=>{S({width:e.contentRect.width,height:e.contentRect.height})}),(0,o.vJ)(()=>{const e=C.current;e&&S({width:e.clientWidth,height:e.clientHeight})},[S]);const Y=(0,d.A)(()=>{const e=y.current;if(!e||!R)return;const n=e.getContext("2d"),{width:o,height:i}=e;if(!o||!i)return;n.clearRect(0,0,o,i),n.save(),k.forEach(({x:e,y:t,sizeFactor:a})=>{const s=e*v*Math.max(o,250*w)+o/2,c=t*v*Math.max(i,250*w)+i/2,r=20*w*v*a;n.drawImage(R,s-r/2,c-r/2,r,r)}),n.restore(),t&&(n.save(),n.fillStyle=t,n.globalCompositeOperation="source-atop",n.fillRect(0,0,o,i),n.restore());const a=n.createRadialGradient(o/2,i/2,0,o/2,i/2,o/2),s=(0,l.qE)(.6*(g??1),0,1);a.addColorStop(0,`rgb(255 255 255 / ${1-s})`),a.addColorStop(1,"rgb(255 255 255 / 1)"),n.save(),n.globalCompositeOperation="destination-out",n.fillStyle=a,n.fillRect(0,0,o,i),n.restore()});return(0,o.vJ)(()=>{Y()},[R,g,v,t,k]),(0,o.vJ)(()=>{const{width:e,height:t}=I(),n=y.current;if(!e||!t||!n)return;const o=Math.max(e,t);(0,i.RK)(()=>{n.width=o*w,n.height=o*w,Y()})},[I,w]),(0,p.Y)("div",{ref:C,className:(0,s.A)("Af3tYFMg",f),style:(0,c.A)(`--_bg-1: ${e[0]}`,`--_bg-2: ${e[1]||e[0]}`),children:(0,p.Y)("canvas",{ref:y,className:(0,s.A)("GbpiDSS_",R&&"Y5FyX1oo"),"aria-hidden":"true"})})})},41512:(e,t,n)=>{n.d(t,{Y:()=>i});var o=n(43503);function i(e){if("none"===e.style.display)return!1;const t=e.getBoundingClientRect(),{height:n}=o.A.get();return t.top<=n&&t.top+t.height>=0}},43581:(e,t,n)=>{n.d(t,{A:()=>$});var o=n(84051),i=n(13439),a=n(90709),s=n(57639),c=n(87357),r=n(60343),l=n(15283),d=n(17712),u=n(59030),h=n(14242),m=n(76023),p=n(63527),g=n(10722),A=n(82117),f=n(39351),v=n(29886),C=n(34201),y=n(68292),I=n(26875),S=n(96454),w=n(58443),R=n(5912),N=n(4438),M=n(9267),b=n(93879),k=n(20021);const Y=1.5*m.$,x=6.5*m.$,P=S.pz||S.Ni?2:5,T=S.pz||S.Ni?2:3,D=(0,o.ph)((0,i.EK)((e,{containerId:t})=>{const{activeReactions:n}=(0,s.nTw)(e),o=(0,s.xYJ)(e,"reactionEffects");return{activeReactions:n?.[t],withEffects:o}})(({containerId:e,reaction:t,className:n,size:s=Y,effectSize:r=x,activeReactions:l,localAmount:u,withEffects:h,observeIntersection:m})=>{const{stopActiveReaction:p}=(0,i.ko)(),g=(0,o.li)(),f=(0,o.li)(),[v,y]=(0,o.J0)([]),I=(0,R.Vz)(g,m),S=(0,o.Kr)(()=>l?.find(e=>(0,a.a0)(e,t)),[l,t]),D=Boolean(h&&S),F=v.length<P;(0,A.A)(([e])=>{D?!u||u<=(e||0)||F&&y(e=>[...e,Date.now()]):y([])},[u,F,D]);const{shouldRender:L}=(0,C.A)({ref:f,noMountTransition:!0,isOpen:D,className:"slow",withShouldRender:!0}),E=(0,d.A)(()=>{const n=v.slice(1);y(n),n.length||p({containerId:e,reaction:t})}),B=(0,c.A)(b.A.root,L&&b.A.animating,n);return(0,k.FD)("div",{className:B,ref:g,teactFastList:!0,children:[(0,k.Y)(M.A,{type:"gold",size:"adaptive",style:`width: ${s}px; height: ${s}px`},"icon"),L&&v.map(e=>(0,k.Y)(N.A,{ref:f,className:b.A.effect,size:r,tgsUrl:w.w.StarReactionEffect,play:I,noLoop:!0,forceAlways:!0,nonInteractive:!0,quality:T,onEnded:E},e))]})}));var F=n(11241),L=n(85118),E=n(64493),B=n(69988);const O=1.25*m.$;function K(e){return e.stars}const _=(0,o.ph)(({reaction:e,containerId:t,isOwnMessage:n,recentReactors:s,className:r,chosenClassName:l,chatId:u,messageId:m,isOutside:S,observeIntersection:w,onClick:R,onPaidClick:N})=>{const{openStarsBalanceModal:M,resetLocalPaidReactions:b,openPaidReactionModal:Y,requestWave:x}=(0,i.ko)(),P=(0,o.li)(),T=(0,o.li)(),_=(0,o.li)(),U=(0,f.A)(),$="paid"===e.reaction.type,J=(0,p.A)(K),z=Boolean(J),j=(0,d.A)((e=1)=>{N?.(e)}),H=(0,d.A)(t=>{if("paid"===e.reaction.type)return t.stopPropagation(),void j();R?.(e.reaction)}),{isContextMenuOpen:q,handleBeforeContextMenu:G,handleContextMenu:V,handleContextMenuClose:W,handleContextMenuHide:X}=(0,g.A)(P,"paid"!==e.reaction.type,void 0,void 0,void 0,!0);(0,o.vJ)(()=>{q&&(Y({chatId:u,messageId:m}),W(),X())},[W,X,q,u,m]),(0,A.A)(([t])=>{const n=e.localAmount,o=P.current;if(!n||!o||n===t?.localAmount)return;if(z&&n>J.balance.amount)return M({originReaction:{chatId:u,messageId:m,amount:n}}),void b({chatId:u,messageId:m});if(e.localAmount){const{left:e,top:t}=o.getBoundingClientRect(),n=e+o.offsetWidth/2,i=t+o.offsetHeight/2;x({startX:n,startY:i})}const i=Number(getComputedStyle(o).scale)||1;_.current?.cancel(),_.current=o.animate([{scale:i},{scale:Math.min(1.2*i,3),offset:.2},{scale:1}],{duration:500*i,easing:"ease-out"})},[e,J?.balance,z,u,m]);const Z=(0,v.A)(e.localAmount),{shouldRender:Q}=(0,C.A)({isOpen:Boolean(e.localAmount),ref:T,className:"slow",withShouldRender:!0});return(0,k.FD)(E.A,{className:(0,c.A)(B.A.root,n&&B.A.own,$&&B.A.paid,S&&B.A.outside,(0,a.eu)(e)&&B.A.chosen,(0,a.eu)(e)&&l,r),size:"tiny",ref:P,onMouseDown:G,onContextMenu:V,onClick:H,children:["paid"===e.reaction.type?(0,k.FD)(k.FK,{children:[(0,k.Y)(L.A,{preset:"button"}),(0,k.Y)(D,{className:B.A.animatedEmoji,containerId:t,reaction:e.reaction,size:O,localAmount:e.localAmount,observeIntersection:w}),Q&&(0,k.Y)(y.A,{ref:T,text:`+${(0,h.Vw)(U,e.localAmount||Z)}`,className:B.A.paidCounter})]}):(0,k.Y)(F.A,{className:B.A.animatedEmoji,containerId:t,reaction:e.reaction,size:O,observeIntersection:w}),s?.length?(0,k.Y)(I.A,{size:"mini",peers:s}):(0,k.Y)(y.A,{text:(0,h.Vw)(U,e.count+(e.localAmount||0)),className:B.A.counter})]})});var U=n(92915);const $=(0,o.ph)(({message:e,threadId:t,isOutside:n,maxWidth:h,metaChildren:m,observeIntersection:p,noRecentReactors:g,isCurrentUserPremium:A,tags:f,isAccountFrozen:v})=>{const{toggleReaction:C,addLocalPaidReaction:y,updateMiddleSearch:I,performMiddleSearch:S,openPremiumModal:w,resetLocalPaidReactions:R,showNotification:N,openFrozenAccountModal:M}=(0,i.ko)(),b=(0,u.A)(),{results:Y,areTags:x,recentReactions:P}=e.reactions,T=Boolean(e.areReactionsPossible&&e.reactions),D=(0,o.Kr)(()=>Y.reduce((e,t)=>e+t.count,0),[Y]),F=(0,o.Kr)(()=>{const e=(0,i.mS)();return P?.reduce((t,n)=>{const{reaction:o,peerId:i}=n,c=(0,a.Jj)(o),r=(0,s.PVB)(e,i);if(!r)return t;const l=t[c]||[];return l.push(r),t[c]=l,t},{})},[P]),L=(0,o.Kr)(()=>{const t=(0,r.bj)(e);return Y.map(e=>{const n=(0,a.Jj)(e.reaction),o=F?.[n],i=D>3||g,s=x?f?.[n]:void 0;return{reaction:e,reactionKey:n,messageKey:t,recentReactors:i?void 0:o,isChosen:(0,a.eu)(e),tag:s}})},[e,g,F,Y,x,f,D]),E=(0,d.A)(n=>{if(!v)return x?A?(I({chatId:e.chatId,threadId:t,update:{savedTag:n}}),void S({chatId:e.chatId,threadId:t})):void w({initialSection:"saved_tags"}):void C({chatId:e.chatId,messageId:e.id,reaction:n});M()}),B=(0,o.Kr)(()=>Y.find(e=>"paid"===e.reaction.type)?.localAmount||0,[Y]),O=(0,d.A)(t=>{v?M():y({chatId:e.chatId,messageId:e.id,count:t})});(0,o.vJ)(()=>{B&&N({localId:(0,r.bj)(e),title:b("StarsSentTitle"),message:b("StarsSentText",B),actionText:b("StarsSentUndo"),cacheBreaker:B.toString(),action:{action:"resetLocalPaidReactions",payload:{chatId:e.chatId,messageId:e.id}},dismissAction:{action:"sendPaidReaction",payload:{chatId:e.chatId,messageId:e.id}},duration:5e3,shouldShowTimer:!0,disableClickDismiss:!0,icon:"star"})},[b,e,B]);const K=(0,d.A)(t=>{v?M():C({chatId:e.chatId,messageId:e.id,reaction:t})});return(0,l.A)(()=>()=>{R({chatId:e.chatId,messageId:e.id})}),(0,k.FD)("div",{className:(0,c.A)("Reactions",n&&"is-outside",T&&"is-service"),style:h?`max-width: ${h}px`:void 0,dir:b.isRtl?"rtl":"ltr",children:[L.map(({reaction:t,recentReactors:o,messageKey:i,reactionKey:a,isChosen:s,tag:c})=>x?(0,k.Y)(U.A,{className:"message-reaction",chosenClassName:"chosen",containerId:i,isOwnMessage:e.isOutgoing,isChosen:s,reaction:t.reaction,tag:c,withContextMenu:A,onClick:E,onRemove:K,observeIntersection:p},a):(0,k.Y)(_,{chatId:e.chatId,messageId:e.id,className:"message-reaction",chosenClassName:"chosen",containerId:i,isOwnMessage:e.isOutgoing,recentReactors:o,isOutside:n,reaction:t,onClick:E,onPaidClick:O,observeIntersection:p},a)),m]})})},45470:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(84051),i=n(32587),a=n(66644),s=n(96454),c=n(35297);const r=2,l=2;function d(e,t=!1,n,d=r,u,h){const m=(0,o.li)(),p=(0,o.li)();return(0,c.A)(()=>{t||(p.current=!1)},[e,t]),(0,o.vJ)(()=>{const o=m.current;if(!e||!o||t||p.current)return;p.current=!0;const c=new Image,r=()=>{const e=u||c.width,t=h||c.height,n=o.getContext("2d",{alpha:!1});(0,a.RK)(()=>{o.width=e,o.height=t,s.QH&&(n.filter=`blur(${d}px)`),n.drawImage(c,2*-d,2*-d,e+4*d,t+4*d),s.QH||(0,i.A)(n,0,0,e,t,d,l)})};c.onload=()=>{n?(0,a.YS)(r):r()},c.src=e},[e,t,h,u,d,n]),m}},45780:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(96454),i=n(87357),a=n(17712),s=n(59030),c=n(42452);var r=n(20021);const l=({title:e,subtitle:t,avatarElement:n,inputElement:l,inputPosition:d="start",disabled:u,inactive:h,ripple:m,className:p,titleClassName:g,subtitleClassName:A,style:f,onClick:v,onDisabledClick:C})=>{const y=(0,s.A)(),I=!h&&!u,S=(0,a.A)(()=>{h||(u?C?.():v?.())});return(0,r.FD)("div",{className:(0,i.A)("OHkx_W75",t&&"neXqB2_A",u&&"tvZeVJPh",I&&"VUSwo4t5",n&&"dMT9byM6",p),onClick:S,style:f,dir:y.isRtl?"rtl":void 0,role:I?"button":void 0,tabIndex:I?0:void 0,children:[!u&&!h&&m&&(0,r.Y)(c.A,{}),Boolean(l)&&(0,r.Y)("div",{className:(0,i.A)("kmjqObdP","end"===d?"iqGhSQGm":"F0Hv3EQm"),children:l}),Boolean(n)&&(0,r.Y)("div",{className:"dnAaRPCo",children:n}),(0,r.Y)("div",{className:(0,i.A)("JSSC0N8V",g),children:e}),Boolean(t)&&(0,r.Y)("div",{className:(0,i.A)("OYmzCSp2",A),children:t}),!l&&o.pz&&(0,r.Y)("div",{className:"P53DrbWA"})]})}},49086:(e,t,n)=>{n.d(t,{C:()=>m,V:()=>h});var o=n(13439),i=n(23174),a=n(90709),s=n(3544),c=n(60343),r=n(43044),l=n(58849),d=n(4961),u=n(18501);function h({message:e,highlight:t,emojiSize:n,asPreview:o,truncateLength:i,isProtected:s,forcePlayback:d,shouldRenderAsHtml:h,isForMediaViewer:m,threadId:p,maxTimestamp:g}){const{text:A,entities:f}=e.content.text||{};if(!A){const t=(0,a.BN)((0,r.Yw)(),e)?.text;return t?[(0,l.A)(t,i)]:void 0}const v=(0,c.bj)(e);return(0,u.fd)({text:(0,l.A)(A,i),entities:f,highlight:t,emojiSize:n,shouldRenderAsHtml:h,containerId:`${m?"mv-":""}${v}`,asPreview:o,isProtected:s,forcePlayback:d,messageId:"id"in e?e.id:void 0,chatId:e.chatId,threadId:p,maxTimestamp:g})}function m(e,t,n=!1,c,r=s.vs){const{entities:u}=t.content.text||{},m=(0,o.mS)(),p=(0,a.ni)(m,t),g=u?.some(e=>e.type===i.C7.Spoiler),A=u?.some(e=>e.type===i.C7.CustomEmoji);if(!g&&!A){const o=(0,l.A)((0,s.dS)(e,t,p,n),r);return c?(0,d.A)(o,["emoji","highlight"],{highlight:c}):(0,d.A)(o)}const f=!n&&(0,s.Su)(t),v=f?`${f} `:"",C=h({message:t,highlight:c,asPreview:!0,truncateLength:r}),y=(0,s.oL)(e,t,p,C);return[...(0,d.A)(v),...Array.isArray(y)?y:[y]].filter(Boolean)}},49746:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(84051),i=n(13439);function a(e,t,n,a,s){const{loadMessage:c}=(0,i.ko)();(0,o.vJ)(()=>{s||t&&!n&&c({chatId:e,messageId:t,replyOriginForId:a})},[s,e,n,t,a])}},54960:(e,t,n)=>{n.d(t,{A:()=>Y});var o=n(84051),i=n(13439),a=n(31481),s=n(66644),c=n(90709),r=n(70636),l=n(57639),d=n(87357),u=n(87894),h=n(79824),m=n(96374),p=n(17712),g=n(59030),A=n(19806),f=n(46222),v=n(40664),C=n(52745),y=n(24956),I=n(21849),S=n(34431),w=n(18276),R=n(10187),N=n(45780),M=n(31722),b=n(20021);const k="PeerPickerItem",Y=(0,o.ph)(({className:e,categories:t,itemIds:n,categoryPlaceholderKey:Y,filterValue:x,filterPlaceholder:P,notFoundText:T,searchInputId:D,itemClassName:F,isLoading:L,noScrollRestore:E,isSearchable:B,lockedUnselectedSubtitle:O,forceShowSelf:K,isViewOnly:_,itemInputType:U,withStatus:$,withPeerTypes:J,withPeerUsernames:z,withDefaultPadding:j,onFilterChange:H,onDisabledClick:q,onLoadMore:G,...V})=>{const W=(0,g.A)(),X=V.allowMultiple,Z=X?V.lockedSelectedIds:void 0,Q=X?V.lockedUnselectedIds:void 0,ee=(0,o.Kr)(()=>X?V.selectedCategories:V.selectedCategory?[V.selectedCategory]:h.p,[X,V.selectedCategory,V.selectedCategories]),te=(0,o.Kr)(()=>X?V.selectedIds:V.selectedId?[V.selectedId]:h.p,[X,V.selectedId,V.selectedIds]),ne=(0,o.li)(),oe=te.length>10;(0,o.vJ)(()=>{if(!B)return;const e=window.setTimeout(()=>{(0,s.YS)(()=>{ne.current?.focus()})},500);return()=>{window.clearTimeout(e)}},[B]);const ie=(0,o.Kr)(()=>new Set(Z),[Z]),ae=(0,o.Kr)(()=>new Set(Q),[Q]),se=(0,o.Kr)(()=>te.filter(e=>!ie.has(e)),[ie,te]),ce=(0,o.Kr)(()=>t?(0,u.dU)(t,"type"):{},[t]),re=(0,o.Kr)(()=>{if(x)return n;const e=[],t=[],o=[];return n.forEach(n=>{ie.has(n)?e.push(n):ae.has(n)?o.push(n):t.push(n)}),e.concat(t,o)},[x,n,ie,ae]),le=(0,p.A)(e=>{if(ie.has(e))q?.(e,!0);else if(ae.has(e))q?.(e,!1);else{if(X&&ce[e]){const t=ce[e].type,n=ee?.slice()||[];return n.includes(t)?n.splice(n.indexOf(t),1):n.push(t),void V.onSelectedCategoriesChange?.(n)}if(X){const t=te.slice();return t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),void V.onSelectedIdsChange?.(t)}ce[e]?V.onSelectedCategoryChange?.(ce[e].type):V.onSelectedIdChange?.(e)}}),de=(0,p.A)(e=>{const{value:t}=e.currentTarget;H?.(t)}),[ue,he]=(0,m.A)(G,re,Boolean(x)),me=(0,o.hb)((e,t)=>{const n=(0,i.mS)(),o=t?ce[e]:void 0,s=t?void 0:(0,l.PVB)(n,e),u=s||o;if(!u)return a.Oig?(0,b.FD)("div",{children:["No peer or category with ID",e]},e):void 0;const h=s&&!(0,r.vj)(s)?s.isSelf&&!K:void 0,m=ae.has(e),p=ie.has(e),g=m||p,f=o?ee?.includes(o.type):te.includes(e),[v,C]=function(){if(m)return[O];if(s){if(z){const e=(0,c.Kl)(s);if(e)return[`@${e}`]}if($){if((0,r.vj)(s))return[(0,c.sT)(W,s)];const e=(0,l.K0y)(n,s.id);return[(0,c.CD)(W,s,e),(0,d.A)((0,c.PF)(s,e,!0)&&M.A.onlineStatus)]}if(J){const e=(0,r.cy)(s);return e&&[W(e)]}}}()||[];return(0,b.Y)(N.A,{className:(0,d.A)(k,F),title:(0,b.Y)(S.A,{peer:u}),avatarElement:(0,b.Y)(I.A,{peer:s||o,isSavedMessages:h,size:"medium"}),subtitle:v,subtitleClassName:C,disabled:g,inactive:_,ripple:!0,inputElement:g?(0,b.Y)(w.A,{name:"lock-badge"}):"radio"===U?(0,b.Y)(y.A,{checked:f,disabled:g,onlyInput:!0}):"checkbox"===U?(0,b.Y)(A.A,{checked:f,disabled:g,onlyInput:!0}):void 0,inputPosition:"end",onClick:()=>le(e),onDisabledClick:q&&(()=>q(e,p))},e)},[ce,K,_,F,U,W,ie,ae,O,q,ee,te,J,$,z]),pe=(0,o.Kr)(()=>{if(t?.length)return(0,b.FD)("div",{children:[Y&&(0,b.Y)("div",{className:M.A.pickerCategoryTitle,children:W(Y)}),t?.map(e=>me(e.type,!0)),(0,b.Y)("div",{className:M.A.pickerCategoryTitle,children:W("FilterChats")})]},"categories")},[t,Y,W,me]);return(0,b.FD)("div",{className:(0,d.A)(M.A.container,e),children:[B&&(0,b.FD)("div",{className:(0,d.A)(M.A.header,"custom-scroll"),dir:W.isRtl?"rtl":void 0,children:[ee?.map(e=>(0,b.Y)(R.A,{className:M.A.peerChip,customPeer:ce[e],onClick:le,clickArg:e,canClose:!0})),Z?.map((e,t)=>(0,b.Y)(R.A,{className:M.A.peerChip,peerId:e,isMinimized:oe&&t<te.length-5,forceShowSelf:K,onClick:le,clickArg:e})),se.map((e,t)=>(0,b.Y)(R.A,{className:M.A.peerChip,peerId:e,isMinimized:oe&&t+(Z?.length||0)<te.length-5,canClose:!0,onClick:le,clickArg:e})),(0,b.Y)(v.A,{id:D,ref:ne,value:x,onChange:de,placeholder:P||W("SelectChat")})]}),ue?.length?(0,b.Y)(f.A,{className:(0,d.A)(M.A.pickerList,j&&M.A.padded,"custom-scroll"),items:ue,itemSelector:`.${k}`,beforeChildren:pe,onLoadMore:he,noScrollRestore:E,children:ue.map(e=>me(e))}):L||!ue||ue.length?(0,b.Y)(C.A,{}):(0,b.Y)("p",{className:M.A.noResults,children:T||"Sorry, nothing found."})]})})},56133:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(16581);function i(e,t,n,i=[]){return(0,o.A)(e=>{e()},i,e,t,n)}},57446:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(13439),i=n(66644),a=n(57639),s=n(19822);const c=300,r=new Map;function l(e,t,n=c){(0,a.PKK)((0,o.mS)())||(n=0);const l="rtl"===e.getAttribute("dir"),{scrollLeft:d,offsetWidth:u,scrollWidth:h,dataset:{scrollId:m}}=e;let p=t-d;if(p<0){const e=-d*(l?-1:1);p=Math.max(p,e)}else if(p>0){const e=h-(d+u);p=Math.min(p,e)}if(0===p)return Promise.resolve();m&&r.has(m)&&r.get(m)();const g=d+p;return new Promise(t=>{(0,i.RK)(()=>{if(0===n)return e.scrollLeft=g,void t();let o=!1;const a=Math.random().toString();e.dataset.scrollId=a,r.set(a,()=>{o=!0}),e.style.scrollSnapType="none";const c=Date.now();function l(){e.style.scrollSnapType="",delete e.dataset.scrollId,r.delete(a)}(0,s.i0)(()=>{if(o)return l(),!1;const i=Math.min((Date.now()-c)/n,1),a=p*(1-function(e){return 1-(1-e)**3.5}(i));return e.scrollLeft=Math.round(g-a),i>=1&&(l(),t()),i<1},i.RK)})})}},58968:(e,t,n)=>{n.d(t,{I5:()=>s,LS:()=>a,V2:()=>i,lw:()=>o});const o={isCustomPeer:!0,type:"premium",titleKey:"PrivacyPremium",subtitleKey:"PrivacyPremiumText",avatarIcon:"star",isAvatarSquare:!0,withPremiumGradient:!0},i=[{isCustomPeer:!0,type:"contacts",titleKey:"FilterContacts",avatarIcon:"user",isAvatarSquare:!0,peerColorId:5},{isCustomPeer:!0,type:"nonContacts",titleKey:"FilterNonContacts",avatarIcon:"non-contacts",isAvatarSquare:!0,peerColorId:4},{isCustomPeer:!0,type:"groups",titleKey:"FilterGroups",avatarIcon:"group",isAvatarSquare:!0,peerColorId:3},{isCustomPeer:!0,type:"channels",titleKey:"FilterChannels",avatarIcon:"channel",isAvatarSquare:!0,peerColorId:1},{isCustomPeer:!0,type:"bots",titleKey:"FilterBots",avatarIcon:"bots",isAvatarSquare:!0,peerColorId:6}],a=[{isCustomPeer:!0,type:"excludeMuted",titleKey:"FilterMuted",avatarIcon:"mute",isAvatarSquare:!0,peerColorId:6},{isCustomPeer:!0,type:"excludeRead",titleKey:"FilterRead",avatarIcon:"readchats",isAvatarSquare:!0,peerColorId:4},{isCustomPeer:!0,type:"excludeArchived",titleKey:"FilterArchived",avatarIcon:"archive",isAvatarSquare:!0,peerColorId:5}],s={isCustomPeer:!0,type:"hidden",titleKey:"StarsTransactionHidden",avatarIcon:"author-hidden",peerColorId:4}},64489:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(84051),i=n(87357),a=n(95807),s=n(37661),c=n(17712),r=n(83057),l=n(4438);const d="lM2usrZU";var u=n(20021);const h=new Set,m=(0,o.ph)(function(e){const{previewUrl:t,thumbDataUri:n,className:o,...m}=e,[p,,g]=(0,s.A)(Boolean(n)),A=(0,r.A)(p),[f,v,C]=(0,s.A)(h.has(t)),y=(0,r.A)(f),[I,S]=(0,s.A)(!1),w=(0,c.A)(()=>{v(),h.add(t)}),R=(0,c.A)(()=>{g(),C(),setTimeout(S,300)}),{size:N}=e;return(0,u.FD)("div",{className:(0,i.A)(o,"xCi2f0YH"),style:(0,a.A)(void 0!==N&&`width: ${N}px; height: ${N}px;`),children:[n&&!I&&(0,u.Y)("img",{src:n,className:(0,i.A)(d,A),draggable:!1}),t&&!I&&(0,u.Y)("img",{src:t,className:(0,i.A)(d,y),draggable:!1,onLoad:w}),(0,u.Y)(l.A,{...m,onLoad:R})]})})},65632:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(84051),i=n(13439),a=n(31481),s=n(74824),c=n(87679);const r=(e,t)=>{const{setThemeSettings:n}=(0,i.ko)(),[r,l]=(0,o.J0)(t);return(0,o.vJ)(()=>{t&&(t.startsWith("#")?l(t):s.fetch(a.nfi,e,s.Type.Blob).then(e=>{const t=URL.createObjectURL(e);(0,c.NN)(t).then(()=>{l(`url(${t})`)})}).catch(()=>{n({theme:e,background:void 0,backgroundColor:void 0,isBlurred:!0,patternColor:"dark"===e?a.MkD:a.be8})}))},[t,e]),t?r:void 0}},66833:(e,t,n)=>{function o(e){return"starGift"===e.type?e.sticker:e.attributes.find(e=>"model"===e.type)?.sticker}function i(e){return"starGift"===e.type?e.availabilityTotal:e.totalCount}function a(e){if("starGiftUnique"===e.type)return function(e){const t=e.find(e=>"model"===e.type),n=e.find(e=>"backdrop"===e.type),o=e.find(e=>"pattern"===e.type);return{model:t,originalDetails:e.find(e=>"originalDetails"===e.type),pattern:o,backdrop:n}}(e.attributes)}n.d(t,{UC:()=>i,uc:()=>a,yQ:()=>o})},68292:(e,t,n)=>{n.d(t,{A:()=>p});var o=n(84051),i=n(13439),a=n(57639),s=n(87357),c=n(37836),r=n(30857),l=n(39351),d=n(73767);var u=n(20021);let h=0;const m=(0,c.Fe)(()=>{h=0}),p=(0,o.ph)(({text:e,className:t,isDisabled:n,ref:c})=>{const{isRtl:p}=(0,l.A)(),g=(0,d.A)(e),A=(0,r.A)(),f=!(!(!n&&(0,a.PKK)((0,i.mS)())&&void 0!==g&&g!==e)||h>=10||(0===h&&m(),h++,0)),v=(0,o.Kr)(()=>f?function(e,t){const n=[],o=e.length,i=t?.length??0;for(let a=0;a<=o;a++){const s=o-a,c=i-a;t&&c>=0&&e[s]!==t[c]?n.unshift((0,u.FD)("div",{className:"IYTzbS8o",children:[(0,u.Y)("div",{className:"Jw1oQFdk",children:e[s]??""}),(0,u.Y)("div",{className:"TZfEz3sc",children:t[c]}),(0,u.Y)("div",{className:"Y9ied8_t",children:e[s]??""})]})):n.unshift((0,u.Y)("span",{children:e[s]??""}))}return n}(e,g):e,[f,g,e]);return(0,o.vJ)(()=>{if(!f)return;const e=window.setTimeout(()=>{A()},200);return()=>{window.clearTimeout(e)}},[f,e]),(0,u.Y)("span",{ref:c,className:(0,s.A)(t,!n&&"tgKbsVmz"),dir:p?"rtl":void 0,children:v})})},69988:(e,t,n)=>{n.d(t,{A:()=>o});const o={root:"gXO57D98",chosen:"VXSJn0Sm",paid:"N3lcrsh8",outside:"Hqw10FGl","animated-emoji":"lFjoRm_p",animatedEmoji:"lFjoRm_p",tag:"Dr889Kzc",tail:"cUfY1b26","is-safari":"rxxUijuG",isSafari:"rxxUijuG","tail-fill":"y591o4fN",tailFill:"y591o4fN","tag-text":"ly7cruxF",tagText:"ly7cruxF",counter:"P2FqNJAi",disabled:"NRtGofbf",paidCounter:"CW4UO1n3"}},73104:(e,t,n)=>{let o,i;n.d(t,{M6:()=>r,v5:()=>l});const a={Down:!0,ArrowDown:!0,Up:!0,ArrowUp:!0,Left:!0,ArrowLeft:!0,Right:!0,ArrowRight:!0," ":!0,PageUp:!0,PageDown:!0,End:!0,Home:!0,Tab:!0},s=e=>{const t="deltaY"in e?e.deltaY:(e=>"changedTouches"in e?e.changedTouches[0].clientY:0)(e);if(!o||!o.contains(e.target)||o.scrollTop<=0&&t<=0||o.scrollTop>=o.scrollHeight-o.offsetHeight&&t>=0){if(i&&e.target.closest(i))return;e.preventDefault()}};function c(e){a[e.key]&&!function(e){if(!(e&&e instanceof HTMLElement))return!1;const t=e,n=t.tagName.toLowerCase();if("textarea"===n)return!0;if("input"!==n)return!1;const o=t.getAttribute("type");return!!o&&["text","password","number","email","tel","url","search","date","datetime","datetime-local","time","month","week"].indexOf(o.toLowerCase())>-1}(e.target)&&e.preventDefault()}function r(e,t){return o=e,i=t,document.addEventListener("wheel",s,{passive:!1}),document.addEventListener("touchmove",s,{passive:!1}),document.onkeydown=c,l}function l(){o=void 0,i=void 0,document.removeEventListener("wheel",s),document.removeEventListener("touchmove",s),document.onkeydown=null}},74984:(e,t,n)=>{n.d(t,{Jm:()=>l,Rh:()=>s,g5:()=>r,ic:()=>c});var o=n(84051),i=n(49763),a=n(30857);function s(e){const t=(0,a.A)();return(0,o.vJ)(()=>(0,i.Yw)(e,t),[e,t]),(0,i.YA)(e)}function c(){const e=(0,a.A)();return(0,o.vJ)(()=>(0,i.P1)(e),[e]),(0,i.PZ)()}function r(){const e=(0,a.A)();return(0,o.vJ)(()=>(0,i.BU)(e),[e]),(0,i.jn)()}function l(){const e=(0,a.A)();return(0,o.vJ)(()=>(0,i.dk)(e),[e]),(0,i.Xq)()}},76283:(e,t,n)=>{n.d(t,{A:()=>Y});var o=n(84051),i=n(13439),a=n(90709),s=n(87357),c=n(17712),r=n(59030),l=n(18276),d=n(64493),u=n(96530),h=n(58443),m=n(76023),p=n(10722),g=n(4438),A=n(87412);const f="uGUjDZKl",v="M62HGuIV",C="WMpEr5XQ";var y=n(20021);const I=2*m.$,S=(0,o.ph)(({reaction:e,chosen:t,isReady:n,noAppearAnimation:i,style:a,isLocked:r,onToggleReaction:d,onSendPaidReaction:u,onShowPaidReactionModal:m})=>{const S=(0,o.li)(),w=(0,c.A)(()=>{"paid"!==e.type?d(e):u?.()}),{isContextMenuOpen:R,handleBeforeContextMenu:N,handleContextMenu:M,handleContextMenuClose:b,handleContextMenuHide:k}=(0,p.A)(S,"paid"!==e.type,void 0,void 0,void 0,!0);return(0,o.vJ)(()=>{R&&(m?.(),b(),k())},[b,m,k,R]),(0,y.FD)("div",{className:(0,s.A)(f,"oc1hpMwv",t&&"paid"!==e.type&&v,!i&&n&&"sx6RTuAU",i&&"kqcWe4tf"),ref:S,style:a,onClick:w,onMouseDown:N,onContextMenu:M,children:["paid"===e.type?(0,y.Y)(g.A,{tgsUrl:h.w.StarReaction,size:I,noLoop:!1}):(0,y.Y)(A.A,{documentId:e.documentId,size:I}),r&&(0,y.Y)(l.A,{className:C,name:"lock-badge"})]})});var w=n(37661),R=n(62587),N=n(18104);const M=2*m.$,b=(0,o.ph)(({reaction:e,isReady:t,noAppearAnimation:n,chosen:o,isLocked:i,onToggleReaction:a})=>{const c=(0,R.A)(`sticker${e.appearAnimation?.id}`,!t||n),r=(0,R.A)(`document${e.selectAnimation?.id}`,!t||n),d=(0,R.A)(`document${e.staticIcon?.id}`,!n),[u,h]=(0,w.A)(),[m,,p]=(0,w.A)(!0),[g,A,I]=(0,w.A)();return(0,y.FD)("div",{className:(0,s.A)(f,o&&v),onClick:function(){a(e.reaction)},onMouseEnter:t&&!m?A:void 0,children:[n&&(0,y.Y)("img",{className:"MZ2tH980",src:d,alt:e.reaction.emoticon,draggable:!1}),!u&&!n&&(0,y.Y)(N.A,{tgsUrl:c,play:m,noLoop:!0,size:M,onEnded:p,forceAlways:!0},e.appearAnimation?.id),!m&&!n&&(0,y.Y)(N.A,{tgsUrl:r,play:g,noLoop:!0,size:M,onLoad:h,onEnded:I,forceAlways:!0},e.selectAnimation?.id),i&&(0,y.Y)(l.A,{className:C,name:"lock-badge"})]})}),k=(0,s.x)("ReactionSelector"),Y=(0,o.ph)(({allAvailableReactions:e,topReactions:t,defaultTagReactions:n,enabledReactions:h,currentReactions:m,reactionsLimit:p,isPrivate:g,isReady:A,canPlayAnimatedEmojis:f,className:v,isCurrentUserPremium:C,isInSavedMessages:I,isInStoryViewer:w,isForEffects:R,effectReactions:N,isWithPaidReaction:M,onClose:Y,onToggleReaction:x,onSendPaidReaction:P,onShowPaidReactionModal:T,onShowMore:D})=>{const{openPremiumModal:F}=(0,i.ko)(),L=(0,o.li)(),E=(0,r.A)(),B=I&&!C&&!w,O=Boolean(p&&m&&m.length>=p),K=(0,o.Kr)(()=>{const o=O?m?.map(e=>e.reaction):R?N:I?n:"some"===h?.type?h.allowed:e?.map(e=>e.reaction),i=o?.map(t=>{const n="custom"===t.type,o=e?.find(e=>(0,a.a0)(e.reaction,t));return R?o:(n||o)&&!o?.isInactive&&(g||O||h&&(0,a.A3)(t,h))?n?t:o:void 0}).filter(Boolean)||[],s=(0,a.fu)(i,t);return M&&s.unshift({type:"paid"}),s},[e,m,n,h,I,g,t,R,N,O,M]),_=(0,o.Kr)(()=>8===K.length?K:K.slice(0,7),[K]),U=_.length<K.length,$=(0,o.Kr)(()=>{const e=m?.filter(({chosenOrder:e})=>void 0!==e)||[];return new Set(e.map(({reaction:e})=>_.findIndex(t=>t&&(0,a.a0)("reaction"in t?t.reaction:t,e))))},[m,_]),J=(0,c.A)(()=>{const e=L.current?.getBoundingClientRect()||{x:0,y:0};D({x:e.x,y:e.y})}),z=(0,c.A)(()=>{Y?.(),F({initialSection:"saved_tags"})}),j=(0,o.Kr)(()=>{if(I){if(!C){const e=E("lng_subscribe_tag_about").split("{link}");return(0,y.FD)("span",{children:[e[0],(0,y.Y)(u.A,{isPrimary:!0,onClick:z,children:E("lng_subscribe_tag_link")}),e[1]]})}return E("SavedTagReactionsHint2")}return w?E("StoryReactionsHint"):R?E("AddEffectMessageHint"):void 0},[C,I,w,E,R]);if(_.length)return(0,y.FD)("div",{className:(0,s.A)(k("&"),v),ref:L,children:[(0,y.Y)("div",{className:k("bubble-small",E.isRtl&&"isRtl")}),(0,y.FD)("div",{className:k("items-wrapper"),children:[(0,y.Y)("div",{className:k("bubble-big",E.isRtl&&"isRtl")}),(0,y.FD)("div",{className:k("items"),children:[j&&(0,y.Y)("div",{className:k("hint"),children:j}),(0,y.FD)("div",{className:k("reactions"),dir:E.isRtl?"rtl":void 0,children:[_.map((e,t)=>"reaction"in e?(0,y.Y)(b,{isReady:A,onToggleReaction:x,reaction:e,noAppearAnimation:!f,chosen:$.has(t),isLocked:B},(0,a.Jj)(e.reaction)):(0,y.Y)(S,{isReady:A,onToggleReaction:x,onSendPaidReaction:P,onShowPaidReactionModal:T,reaction:e,noAppearAnimation:!f,chosen:$.has(t),isLocked:B,style:`--_animation-delay: ${20*(7-t)}ms`},(0,a.Jj)(e))),U&&(0,y.Y)(d.A,{color:"translucent",className:k("show-more"),onClick:J,children:(0,y.Y)(l.A,{name:"down"})})]})]})]})]})})},79174:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(84051),i=n(66644),a=n(43874);const s=500,c=300;function r(e,t,n){const{isMobile:r}=(0,a.Ay)();(0,o.vJ)(()=>{t?r||setTimeout(()=>{(0,i.RK)(()=>{e.current?.isConnected&&e.current.focus()})},s):(e.current?.isConnected&&e.current.blur(),n&&setTimeout(n,c))},[e,r,t,n])}},79519:(e,t,n)=>{n.d(t,{A:()=>u});var o=n(84051),i=n(61433),a=n(31481),s=n(66644),c=n(81954);const r=500,l=a.nxZ,d=20;function u({elementRef:e,chatId:t,isFocused:n,focusDirection:a,noFocusHighlight:u,isResizingContainer:h,isJustAdded:m,isQuote:p,scrollTargetPosition:g,isInFocusList:A}){const f=(0,o.li)(!m);(0,o.Nf)(()=>{const t=f.current;if(f.current=!1,n&&e.current&&!A){const n=e.current.closest(".MessageList"),o=u,m=g||o?"end":"centerOrTop",A=()=>{const t=void 0!==a?o?r:l:void 0,u=(0,c.Ay)({container:n,element:e.current,position:m,margin:d,maxDistance:t,forceDirection:a,forceNormalContainerHeight:h,shouldReturnMutationFn:!0});if(p){const t=e.current.querySelector(".is-quote");t&&(0,s.RK)(()=>{(0,i.YM)(t,"animate")})}return u};t?(0,s.gm)(A):(0,s.YS)(()=>{(0,s.RK)(A())})}},[e,t,n,a,u,h,p,g,A])}},79577:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(84051),i=n(23174),a=n(90709),s=n(62587),c=n(64489),r=n(20021);const l=(0,o.ph)(function(e){const{sticker:t,noLoad:n,forcePreview:o,...l}=e,d=t?.thumbnail?.dataUri,u=t&&(0,a.Mw)(t,"full"),h=(0,s.A)(t?(0,a.Mw)(t,"preview"):void 0,n&&!o,i.qZ.BlobUrl),m=(0,s.A)(u,n);return(0,r.Y)(c.A,{tgsUrl:m,previewUrl:h,thumbDataUri:d,...l})})},79582:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(13439),i=n(57639),a=n(87894);const s=3e9,c=3e8;function r(e,t=!1,n,r){const l=(0,o.mS)();return(0,a.My)(e,e=>{if(e===r)return 1/0;const o=(0,i.hds)(l,e);if(!o)return 0;let a=0;const d=(0,i.yHC)(l,e);return d&&(a+=d.date),t&&o.isVerified&&(a+=s),n&&n.includes(e)&&(a=Date.now()+c+(n.length-n.indexOf(e))),a},"desc")}},80539:(e,t,n)=>{n.d(t,{Ay:()=>r,g4:()=>l,qh:()=>s});var o=n(23174),i=n(31481),a=n(96454);const s={B:o.C7.Bold,STRONG:o.C7.Bold,I:o.C7.Italic,EM:o.C7.Italic,INS:o.C7.Underline,U:o.C7.Underline,S:o.C7.Strike,STRIKE:o.C7.Strike,DEL:o.C7.Strike,CODE:o.C7.Code,PRE:o.C7.Pre,BLOCKQUOTE:o.C7.Blockquote},c=3;function r(e,t=!1,n=!1){const r=document.createElement("div");r.innerHTML=n?e:function(e){let t=e.slice(0);return t=t.replace(/&nbsp;/g," "),t=t.replace(/<div><br([^>]*)?><\/div>/g,"\n"),t=t.replace(/<br([^>]*)?>/g,"\n"),t=t.replace(/<\/div>(\s*)<div>/g,"\n"),t=t.replace(/<div>/g,"\n"),t=t.replace(/<\/div>/g,""),t=t.replace(/^`{3}(.*?)[\n\r](.*?[\n\r]?)`{3}/gms,'<pre data-language="$1">$2</pre>'),t=t.replace(/^`{3}[\n\r]?(.*?)[\n\r]?`{3}/gms,"<pre>$1</pre>"),t=t.replace(/[`]{3}([^`]+)[`]{3}/g,"<pre>$1</pre>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[`]{1}([^`\n]+)[`]{1}(?![^<]*<\/(code|pre)>)/g,"<code>$2</code>"),a.TL||(t=t.replace(/\[<img[^>]+alt="([^"]+)"[^>]*>]/gm,"[$1]")),t=t.replace(/(?!<(?:code|pre)[^<]*|<\/)\[([^\]\n]+)\]\(customEmoji:(\d+)\)(?![^<]*<\/(?:code|pre)>)/g,'<img alt="$1" data-document-id="$2">'),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[*]{2}([^*\n]+)[*]{2}(?![^<]*<\/(code|pre)>)/g,"<b>$2</b>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[_]{2}([^_\n]+)[_]{2}(?![^<]*<\/(code|pre)>)/g,"<i>$2</i>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[~]{2}([^~\n]+)[~]{2}(?![^<]*<\/(code|pre)>)/g,"<s>$2</s>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[|]{2}([^|\n]+)[|]{2}(?![^<]*<\/(code|pre)>)/g,`<span data-entity-type="${o.C7.Spoiler}">$2</span>`),t}(t?function(e){return e.replace(new RegExp(`\\[([^\\]]+?)]\\((${i.kNZ}+?)\\)`,"g"),(e,t,n)=>`<a href="${n.includes("://")?n:n.includes("@")?`mailto:${n}`:`https://${n}`}">${t}</a>`)}(e):e),l(r);const d=r.innerText.trim().replace(/\u200b+/g,"");let u=-r.innerText.indexOf(d[0]),h=0;const m=[];function p(e){if(e.nodeType===Node.COMMENT_NODE)return;const{index:t,entity:n}=function(e,t,n){const i=function(e){if(e instanceof HTMLElement&&e.dataset.entityType)return e.dataset.entityType;if(s[e.nodeName])return s[e.nodeName];if("A"===e.nodeName){const t=e;return t.dataset.entityType===o.C7.MentionName?o.C7.MentionName:t.dataset.entityType===o.C7.Url?o.C7.Url:t.href.startsWith("mailto:")?o.C7.Email:t.href.startsWith("tel:")?o.C7.Phone:t.href!==t.textContent?o.C7.TextUrl:o.C7.Url}return"SPAN"===e.nodeName?e.dataset.entityType:"IMG"===e.nodeName&&e.dataset.documentId?o.C7.CustomEmoji:void 0}(e);if(!i||!e.textContent)return{index:n,entity:void 0};const a=t.indexOf(e.textContent,n),c=a>=0?a:n,r=t.substring(0,c).length,{length:l}=t.substring(c,c+e.textContent.length);if(i===o.C7.TextUrl)return{index:c,entity:{type:i,offset:r,length:l,url:e.href}};if(i===o.C7.MentionName)return{index:c,entity:{type:i,offset:r,length:l,userId:e.dataset.userId}};if(i===o.C7.Pre)return{index:c,entity:{type:i,offset:r,length:l,language:e.dataset.language}};if(i===o.C7.CustomEmoji)return{index:c,entity:{type:i,offset:r,length:l,documentId:e.dataset.documentId}};if(i===o.C7.Timestamp){const t=Number(e.dataset.timestamp);return Number.isNaN(t)?{index:c,entity:void 0}:{index:c,entity:{type:i,offset:r,length:l,timestamp:t}}}return{index:c,entity:{type:i,offset:r,length:l}}}(e,d,u);if(n)u=t,m.push(n);else if(e.textContent){if(0===t&&""===e.textContent.trim())return;u+=e.textContent.length}e.hasChildNodes()&&h<=c&&(h+=1,Array.from(e.childNodes).forEach(p))}return Array.from(r.childNodes).forEach(e=>{h=1,p(e)}),{text:d,entities:m.length?m:void 0}}function l(e){e.querySelectorAll("img").forEach(e=>{e.dataset.documentId?e.textContent=e.alt||"":e.replaceWith(e.alt||"")})}},81686:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(31481);const i=1;function a(){const e=window.getSelection();let t=e?.rangeCount?e.getRangeAt(0).cloneContents():void 0;const n=e?.focusNode&&e.focusOffset>0&&s(e.focusNode,o.zPk);if(!t||0===t.childElementCount)return;const a=Array.from(t.children).reduce((e,t)=>t.nodeType===i&&t.classList.contains("message-date-group")?Array.from(t.querySelectorAll(".Message")).reduce((e,t)=>e.concat(Number(t.dataset.messageId)),e):t.nodeType===i&&t.classList.contains("Message")?e.concat(Number(t.dataset.messageId)):e,[]);for(;t.firstChild;)t.removeChild(t.firstChild);return t=void 0,n||a.pop(),a}function s(e,t){return!(e.nodeType!==i||!e.classList.contains(t))||!!e.parentNode&&s(e.parentNode,t)}},81949:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(87357);var i=n(20021);const a=({children:e,className:t,onClick:n,onMouseDown:a})=>(0,i.Y)("div",{className:(0,o.A)("hJUqHi4B",n&&"hjDEmFaT",t),onClick:n,onMouseDown:a,children:e})},81954:(e,t,n)=>{n.d(t,{Ay:()=>g,H$:()=>C,_v:()=>A,o8:()=>v});var o=n(84051),i=n(13439),a=n(89925),s=n(31481),c=n(66644),r=n(57639),l=n(96454),d=n(16460),u=n(19822);let h,m,p=!1;function g(e){h=e;const t=f(e);if(e.shouldReturnMutationFn)return t;(0,c.RK)(t)}function A(){p&&((0,u.vk)(),(0,c.YS)(()=>{(0,c.RK)(f(h))}))}function f(e){const{container:t,element:n,position:g,margin:A=0,maxDistance:f=s.nxZ,forceDirection:v,forceNormalContainerHeight:C}=e;let S=e.forceDuration;v!==a.CC.Static&&(0,r.PKK)((0,i.mS)())||(S=0);const{offsetHeight:w}=n,{scrollTop:R,clientHeight:N,scrollHeight:M}=t,b=(0,d.A)(n,t).top,k=C&&t.dataset.normalHeight?Number(t.dataset.normalHeight):N;let Y;switch(g){case"start":Y=b-A+(l.Ni?1:0);break;case"end":Y=b+w+A-k;break;case"nearest":case"center":case"centerOrTop":Y=w<k?b+w/2-k/2:b-A}const x=function(e,t,n=s.nxZ,o){const{scrollTop:i}=e;if(void 0===o){const e=t-i;if(e<-n)return i+(e+n);if(e>n)return i+(e-n)}else{if(o===a.CC.Up)return t+n;if(o===a.CC.Down)return Math.max(0,t-n)}return i}(t,Y,f,v);let P=Y-x;if(P<0){const e=-x;P=Math.max(P,e)}else if(P>0){const e=M-(x+k);P=Math.min(P,e)}const T=Math.abs(P);return()=>{if(T<1)return void(R!==x&&(t.scrollTop=x));const e=x+P;if(0===S)return void(t.scrollTop=e);const n=T<=s.s8T?y:I,i=S||s.SKD+T/s.nxZ*(s.OzO-s.SKD),a=Date.now();p=!0;const r=m;m=(0,o.VK)(void 0,!0),r?.(),(0,u.S0)(()=>{const o=Math.min((Date.now()-a)/i,1),s=P*(1-n(o)),c=Math.round(e-s);return t.scrollTop=c,p=o<1&&c!==e,p||(h=void 0,m?.(),m=void 0),p},c.RK)}}function v(){return p}function C(){m(),m=void 0}function y(e){return 1-(1-e)**3.5}function I(e){return 1-(1-e)**6}},83594:(e,t,n)=>{n.d(t,{A:()=>h});var o=n(84051),i=n(90709),a=n(96454),s=n(87357),c=n(95807),r=n(62587),l=n(87412);const d="PZAuNVZH";var u=n(20021);const h=(0,o.ph)(({reaction:e,isLottie:t,className:n,particleSize:h,onEnded:m})=>{const p=(0,i.aL)(e.documentId,!0),g=(0,r.A)(t?void 0:p),A=(0,o.Kr)(()=>a.ol?Array.from({length:7}).map(()=>function(e=20){const t=(e/2+Math.random()*e*3)*(Math.random()>.5?1:-1),n=e+Math.random()*e*4;return`M 0 0 C 0 0 ${t} ${-n-e} ${t} ${n}`}(h)):[],[h]);if(g||t)return(0,u.Y)("div",{className:(0,s.A)("aInga6VW",n),style:(0,c.A)(Boolean(h)&&`--particle-size: ${h}px`),children:A.map((n,o)=>{const i=`--offset-path: path('${n}');`;return t?(0,u.Y)(l.A,{documentId:e.documentId,className:d,style:i,withSharedAnimation:!0,size:h,onAnimationEnd:0===o?m:void 0}):(0,u.Y)("img",{src:g,alt:"",className:d,style:i,draggable:!1,onAnimationEnd:0===o?m:void 0})})})})},92915:(e,t,n)=>{n.d(t,{A:()=>I});var o=n(84051),i=n(13439),a=n(87357),s=n(76023),c=n(10722),r=n(37661),l=n(17712),d=n(59030),u=n(11241),h=n(64493),m=n(40664),p=n(22337);var g=n(20021);const A=(0,o.ph)(({isOpen:e,title:t,subtitle:n,placeholder:i,submitText:a,maxLength:s,initialValue:c="",onClose:r,onSubmit:u})=>{const A=(0,d.A)(),[f,v]=(0,o.J0)(c),C=(0,l.A)(e=>{v(e.target.value)}),y=(0,l.A)(()=>{u(f)});return(0,g.FD)(p.A,{className:"narrow",title:t,isOpen:e,onClose:r,isSlim:!0,children:[Boolean(n)&&(0,g.Y)("div",{className:"cGrbcqD_",children:n}),(0,g.Y)(m.A,{placeholder:i,value:f,onChange:C,maxLength:s,teactExperimentControlled:!0}),(0,g.FD)("div",{className:"dialog-buttons mt-2",children:[(0,g.Y)(h.A,{className:"confirm-dialog-button",onClick:y,children:a||A("Save")}),(0,g.Y)(h.A,{className:"confirm-dialog-button",isText:!0,onClick:r,children:A("Cancel")})]})]})});var f=n(71429),v=n(24433),C=n(69988);const y=1.25*s.$,I=(0,o.ph)(({reaction:e,tag:t,containerId:n,isChosen:s,isOwnMessage:m,className:p,chosenClassName:I,withCount:S,isDisabled:w,withContextMenu:R,observeIntersection:N,onClick:M,onRemove:b})=>{const{editSavedReactionTag:k}=(0,i.ko)(),Y=(0,o.li)(),x=(0,o.li)(),P=(0,d.A)(),[T,D,F]=(0,r.A)(),{title:L,count:E}=t||{},B=Boolean(L||S&&E),O=(0,l.A)(()=>{M?.(e)}),K=(0,l.A)(()=>{b?.(e)}),_=(0,l.A)(t=>{k({reaction:e,title:t}),F()}),{isContextMenuOpen:U,contextMenuAnchor:$,handleBeforeContextMenu:J,handleContextMenu:z,handleContextMenuClose:j,handleContextMenuHide:H}=(0,c.A)(Y,!R,void 0,void 0,void 0,!0),q=(0,l.A)(()=>Y.current),G=(0,l.A)(()=>document.body),V=(0,l.A)(()=>x.current),W=(0,l.A)(()=>({withPortal:!0,shouldAvoidNegativePosition:!0}));if(!S||0!==E)return(0,g.FD)(h.A,{className:(0,a.A)(C.A.root,C.A.tag,m&&C.A.own,s&&C.A.chosen,s&&I,w&&C.A.disabled,p),size:"tiny",onClick:O,onMouseDown:J,onContextMenu:z,ref:Y,children:[(0,g.Y)(u.A,{className:C.A.animatedEmoji,containerId:n,reaction:e,loopLimit:1,size:y,observeIntersection:N}),B&&(0,g.FD)("span",{className:C.A.tagText,children:[L&&(0,g.Y)("span",{children:L}),S&&(0,g.Y)("span",{children:E})]}),(0,g.Y)("svg",{className:C.A.tail,width:"15",height:"30",viewBox:"0 0 15 30",children:(0,g.Y)("path",{className:C.A.tailFill,d:"m 0,30 c 3.1855,0 6.1803,-1.5176 8.0641,-4.0864 l 5.835,-7.9568 c 1.2906,-1.7599 1.2906,-4.1537 0,-5.9136 L 8.0641,4.08636 C 6.1803,1.51761 3.1855,0 0,0"})}),R&&(0,g.Y)(A,{isOpen:T,maxLength:15,title:P(t?.title?"SavedTagRenameTag":"SavedTagLabelTag"),subtitle:P("SavedTagLabelTagText"),placeholder:P("SavedTagLabelPlaceholder"),initialValue:t?.title,onClose:F,onSubmit:_}),R&&$&&(0,g.FD)(f.A,{ref:x,isOpen:U,anchor:$,getTriggerElement:q,getRootElement:G,getMenuElement:V,getLayout:W,autoClose:!0,withPortal:!0,onClose:j,onCloseAnimationEnd:H,children:[(0,g.Y)(v.A,{icon:"tag-filter",onClick:O,children:P("SavedTagFilterByTag")}),(0,g.Y)(v.A,{icon:"tag-name",onClick:D,children:P(t?.title?"SavedTagRenameTag":"SavedTagLabelTag")}),(0,g.Y)(v.A,{icon:"tag-crossed",destructive:!0,onClick:K,children:P("SavedTagRemoveTag")})]})]})})},93879:(e,t,n)=>{n.d(t,{A:()=>o});const o={root:"O9uCTt5C","animated-icon":"HiI6SMxF",animatedIcon:"HiI6SMxF",effect:"NhFcTGja",animating:"ikfZ6Igz",withEffectOnly:"jjRJmHCg"}},97768:(e,t,n)=>{n.d(t,{A:()=>l,d:()=>r});var o=n(13439),i=n(57639),a=n(84051),s=n(87357),c=n(20021);const r=()=>(0,c.Y)("span",{className:"icon",children:(0,c.FD)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,c.Y)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2.3"}),(0,c.Y)("circle",{cx:"12",cy:"12",r:"5",stroke:"currentColor","stroke-width":"2.3"}),(0,c.Y)("circle",{cx:"12",cy:"12",r:"1.5",fill:"currentColor"})]})}),l=(0,a.ph)((0,o.EK)(e=>{const{isFocusListShown:t}=(0,i.nTw)(e);return{isActive:t,count:(0,i.kIj)(e)}})(({isActive:e,count:t})=>{const{toggleFocusList:n}=(0,o.ko)();return(0,c.FD)("div",{onClick:()=>n(),className:(0,s.A)("FocusListButton-trigger",e&&"active"),children:[(0,c.Y)(r,{}),"Priority",(0,c.Y)("span",{className:"count",children:t})]})}))},99515:(e,t,n)=>{n.d(t,{A:()=>te});var o=n(84051),i=n(13439),a=n(23174),s=n(31481),c=n(90709),r=n(57639),l=n(56494),d=n(87357),u=n(85982),h=n(9716),m=n(80539);const p=document.createElement("div"),g=new Set([a.C7.Bold,a.C7.Italic,a.C7.Underline,a.C7.Strike,a.C7.Spoiler,a.C7.CustomEmoji]);function A(e){const t=function(e){const t=e.cloneContents();p.appendChild(t);const n=function(e,t){const n=e.commonAncestorContainer;if(n.nodeType===Node.ELEMENT_NODE&&n.classList.contains("text-content"))return t;let o=e.commonAncestorContainer.parentElement;for(;o&&!o.classList.contains("text-content");){const e=o.tagName.toLowerCase(),n=o.dataset.entityType;t=`<${e} ${n?`data-entity-type="${n}"`:""}>${t}</${e}>`,o=o.parentElement}return t}(e,p.innerHTML);return p.innerHTML="",n.replace(/<br\s*\/?>/gi,"\n").replace(/&nbsp;/gi," ").replace(/\u00a0/gi," ")}(e);return function(e){if(!e.entities)return e;const t=e.entities.filter(e=>g.has(e.type));return{...e,entities:t.length?t:void 0}}((0,m.Ay)(t,!1,!0))}var f=n(37661),v=n(39351),C=n(17712),y=n(59030),I=n(24531),S=n(34201),w=n(80089),R=n(80464),N=n(20021);const M=e=>{const{isOpen:t}=e,n=(0,R.A)(w.ar.Extra,"PinMessageModal",!t);return n?(0,N.Y)(n,{...e}):void 0};var b=n(94189),k=n(73104),Y=n(76023),x=n(4961),P=n(3544),T=n(96454),D=n(81686),F=n(43044),L=n(58554),E=n(49086);function B(e){return e?"lng_context_copy_selected":"lng_context_copy_text"}var O=n(43874),K=n(97768),_=n(26875),U=n(71429),$=n(24433),J=n(60859),z=n(55158),j=n(17663);const H="C3LVl_JT",q="cd1ZZeSy",G=(0,o.ph)(function({message:e}){const t=(0,y.A)(),{editDate:n}=e,o=!n;return(0,N.Y)($.A,{icon:"clock-edit",className:H,children:o?(0,N.Y)(z.A,{className:q}):Boolean(n)&&t("Chat.PrivateMessageEditTimestamp.Date",(0,j.U)(t,1e3*n))})});var V=n(76283),W=n(41036);const X=(0,o.ph)(function({message:e,shouldRenderShowWhen:t,canLoadReadDate:n,closeContextMenu:o}){const{openPrivacySettingsNoticeModal:a}=(0,i.ko)(),s=(0,y.A)(),{readDate:c}=e,r=n&&!c&&!t;return(0,N.Y)($.A,{icon:"message-read",className:H,children:(0,N.Y)(W.Ay,{name:"fade",activeKey:r?1:2,className:"mg4sBQ9n",children:r?(0,N.Y)(z.A,{className:q}):(0,N.FD)(N.FK,{children:[Boolean(c)&&s("PmReadAt",(0,j.U)(s,1e3*c)),!c&&t&&(0,N.FD)("div",{children:[s("PmRead"),(0,N.Y)("span",{className:"bmxij_dk",onClick:()=>{o(),a({chatId:e.chatId,isReadDate:!0})},children:s("PmReadShowWhen")})]})]})})})}),Z=(0,o.ph)(({isReactionPickerOpen:e,availableReactions:t,topReactions:n,defaultTagReactions:s,isOpen:r,message:l,poll:m,webPage:p,story:g,isPrivate:A,isCurrentUserPremium:I,enabledReactions:S,isWithPaidReaction:w,reactionsLimit:R,anchor:M,targetHref:b,canSendNow:j,canReschedule:H,canBuyPremium:q,canReply:W,canQuote:Z,canEdit:Q,canAppendTodoList:ee,noReplies:te,canPin:ne,canUnpin:oe,canDelete:ie,canForward:ae,canReport:se,canFaveSticker:ce,canUnfaveSticker:re,canCopy:le,canCopyLink:de,canSelect:ue,canDownload:he,canSaveGif:me,canRevote:pe,canClosePoll:ge,canTranslate:Ae,canShowOriginal:fe,canSelectLanguage:ve,isDownloading:Ce,repliesThreadInfo:ye,canShowSeenBy:Ie,canShowReactionsCount:Se,canShowReactionList:we,seenByRecentPeers:Re,hasCustomEmoji:Ne,customEmojiSets:Me,canPlayAnimatedEmojis:be,isInSavedMessages:ke,shouldRenderShowWhen:Ye,canLoadReadDate:xe,onReply:Pe,onOpenThread:Te,onEdit:De,onAppendTodoList:Fe,onPin:Le,onUnpin:Ee,onForward:Be,onDelete:Oe,onFaveSticker:Ke,onReport:_e,onUnfaveSticker:Ue,onSelect:$e,onSend:Je,onReschedule:ze,onClose:je,onCloseAnimationEnd:He,onCopyLink:qe,onCopyNumber:Ge,onDownload:Ve,onSaveGif:We,onCancelVote:Xe,onClosePoll:Ze,onShowSeenBy:Qe,onShowReactors:et,onToggleReaction:tt,onSendPaidReaction:nt,onShowPaidReactionModal:ot,onCopyMessages:it,onReactionPickerOpen:at,onTranslate:st,onShowOriginal:ct,onSelectLanguage:rt,onMoveToBottom:lt,onAddToFocus:dt,onRemoveFromFocus:ut,onRemindMe:ht,userFullName:mt,canGift:pt,isInFocusList:gt})=>{const{showNotification:At,openStickerSet:ft,openCustomEmojiSets:vt,loadStickers:Ct,openGiftModal:yt}=(0,i.ko)(),It=(0,o.li)(),St=(0,o.li)(),wt=(0,y.A)(),Rt=(0,v.A)(),Nt=!A&&!S,Mt=l.areReactionsPossible,bt=we&&!Nt||Mt,kt="isEdited"in l&&l.isEdited,Yt=l.seenByDates,xt="giftPremium"===l.content.action?.type,Pt="giftCode"===l.content.action?.type,Tt="starGift"===l.content.action?.type,Dt="starGiftUnique"===l.content.action?.type,Ft=(0,h.L8)(l.chatId)&&pt&&(xt||Pt||Tt||Dt),Lt=!j,Et=ae,Bt=ke&&ae,Ot=Lt||Et||Bt,[Kt,_t]=(0,f.A)(),[Ut,$t,Jt]=(0,f.A)(),{isMobile:zt,isDesktop:jt}=(0,O.Ay)(),Ht=(0,o.Kr)(()=>Yt?Object.keys(Yt).length:0,[Yt]),qt=(0,C.A)(()=>{At({message:wt("Share.Link.Copied")}),je()}),Gt=(0,C.A)(()=>{yt({forUserId:l.chatId}),je()});(0,o.vJ)(()=>{r&&Kt&&!e&&je()},[je,r,e,Kt]),(0,o.vJ)(()=>{Me?.length&&Me.map(e=>Ct({stickerSetInfo:{id:e.id,accessHash:e.accessHash}}))},[Me,vt]);const Vt=(0,C.A)(()=>{Me&&(1===Me.length?ft({stickerSetInfo:{shortName:Me[0].shortName}}):vt({setIds:Me.map(e=>e.id)}),je())}),Wt=function(e,t,n,o,i,s,r,l){const{webPage:d}=t||{},h=[],m=(0,c.P5)(e),p=(0,c.yl)(e)||((0,c.rU)(d)?void 0:(0,c.eY)(d)),g=(0,c.Qm)(e),A=p?(0,c.rI)(p,"full"):void 0,f=o&&p&&(A||(0,c.KG)(p))&&u.WO&&!T.Yw,v=window.getSelection();if(f&&h.push({label:"lng_context_copy_image",icon:"copy-media",handler:()=>{Promise.resolve(A?L.hd(A,a.qZ.BlobUrl):p.blobUrl).then(u.qp),i?.()}}),o&&n)h.push({label:"lng_context_copy_link",icon:"copy",handler:()=>{(0,u.eM)(n),i?.()}});else if(o&&m){const n=Boolean(v?.anchorNode?.parentNode&&v.anchorNode.parentNode.closest(".Message .content-inner")&&""!==v.toString().replace(/(?:\r\n|\r|\n)/g,"")&&function(e){const t=window.getSelection(),n=t?.anchorNode?.parentNode,o=n?.closest(".Message.message-list-item");return(0,c.GZ)(e.id)===o?.id}(e));h.push({label:B(n),icon:"copy",handler:()=>{const o=(0,D.A)();if(o?.length&&r)r(o);else if(n)document.execCommand("copy");else{const n=(0,E.V)({message:e,shouldRenderAsHtml:!0});n&&(0,u.A)(n.join(""),(0,P.Gn)((0,F.Yw)(),e,t))}i?.()}})}return s&&h.push({label:"lng_context_copy_message_link",icon:"link",handler:s}),g&&l&&h.push({label:"lng_profile_copy_phone",icon:"copy",handler:()=>{l(),i?.()}}),h}(l,(0,c.FE)({poll:m,webPage:p,story:g}),b,le,qt,de?qe:void 0,it,Ge),Xt=(0,C.A)(()=>document.querySelector(`.Transition_slide-active > .MessageList div[data-message-id="${l.id}"]`)),Zt=(0,C.A)(()=>document.querySelector(".Transition_slide-active > .MessageList")),Qt=(0,C.A)(()=>document.querySelector(".MessageContextMenu .bubble")),en=(0,C.A)(()=>{const e=zt&&document.querySelector(".AudioPlayer-content")?.offsetHeight||0,t=document.getElementById("MiddleColumn"),n=getComputedStyle(t),o=parseFloat(n.getPropertyValue("--middle-header-panes-height"))||0;return{extraPaddingX:10,extraTopPadding:document.querySelector(".MiddleHeader").offsetHeight,extraMarginTop:o+e,shouldAvoidNegativePosition:!jt,menuElMinWidth:bt&&zt?19.25*Y.$:void 0}});(0,o.vJ)(()=>{r?setTimeout(()=>{$t()},200):Jt()},[r,$t,Jt]),(0,o.vJ)(()=>(0,k.M6)(St.current,".ReactionPicker"),[r]);const tn=(0,C.A)(e=>{at(e),_t()});return(0,N.FD)(U.A,{ref:It,isOpen:r,anchor:M,getTriggerElement:Xt,getRootElement:Zt,getMenuElement:Qt,getLayout:en,withMaxHeight:!0,className:(0,d.A)("MessageContextMenu","fluid",bt&&"with-reactions"),onClose:je,onCloseAnimationEnd:He,children:[bt&&(0,N.Y)(V.A,{enabledReactions:S,topReactions:n,allAvailableReactions:t,defaultTagReactions:s,currentReactions:l.reactions?.results,reactionsLimit:R,onToggleReaction:tt,onSendPaidReaction:nt,onShowPaidReactionModal:ot,isWithPaidReaction:w,isPrivate:A,isReady:Ut,canBuyPremium:q,isCurrentUserPremium:I,isInSavedMessages:ke,canPlayAnimatedEmojis:be,onShowMore:tn,onClose:je,className:(0,d.A)(Kt&&"ReactionSelector-hidden")}),(0,N.FD)("div",{ref:St,className:(0,d.A)("MessageContextMenu_items scrollable-content custom-scroll",Kt&&"MessageContextMenu_items-hidden"),dir:wt.isRtl?"rtl":void 0,children:[Ot&&(0,N.FD)(N.FK,{children:[Lt&&(0,N.Y)($.A,{icon:gt?"check":void 0,customIcon:gt?void 0:(0,N.Y)(K.d,{}),onClick:gt?ut:dt,children:gt?"Remove from Priority":"Add to Priority"}),Et&&(0,N.Y)($.A,{icon:"schedule",onClick:ht,children:"Remind me"}),Bt&&(0,N.Y)(N.FK,{children:(0,N.Y)($.A,{icon:"arrow-down",onClick:lt,children:"Move to bottom"})}),(0,N.Y)(J.A,{})]}),Ft&&(0,N.Y)($.A,{icon:"gift",onClick:Gt,children:l?.isOutgoing?wt("SendAnotherGift"):wt("Conversation.ContextMenuSendGiftTo",mt)}),j&&(0,N.Y)($.A,{icon:"send-outline",onClick:Je,children:wt("MessageScheduleSend")}),H&&(0,N.Y)($.A,{icon:"schedule",onClick:ze,children:wt("MessageScheduleEditTime")}),W&&(0,N.Y)($.A,{icon:"reply",onClick:Pe,children:wt(Z?"lng_context_quote_and_reply":"Reply")}),!te&&Boolean(ye?.messagesCount)&&(0,N.Y)($.A,{icon:"replies",onClick:Te,children:wt("Conversation.ContextViewReplies",ye.messagesCount,"i")}),Q&&(0,N.Y)($.A,{icon:"edit",onClick:De,children:wt("Edit")}),ee&&(0,N.Y)($.A,{icon:"add",onClick:Fe,children:Rt("MenuButtonAppendTodoList")}),ce&&(0,N.Y)($.A,{icon:"favorite",onClick:Ke,children:wt("AddToFavorites")}),re&&(0,N.Y)($.A,{icon:"favorite",onClick:Ue,children:wt("Stickers.RemoveFromFavorites")}),Ae&&(0,N.Y)($.A,{icon:"language",onClick:st,children:wt("TranslateMessage")}),fe&&(0,N.Y)($.A,{icon:"language",onClick:ct,children:wt("ShowOriginalButton")}),ve&&(0,N.Y)($.A,{icon:"web",onClick:rt,children:wt("lng_settings_change_lang")}),Wt.map(e=>(0,N.Y)($.A,{icon:e.icon,onClick:e.handler,withPreventDefaultOnMouseDown:!0,children:wt(e.label)},e.label)),ne&&(0,N.Y)($.A,{icon:"pin",onClick:Le,children:wt("DialogPin")}),oe&&(0,N.Y)($.A,{icon:"unpin",onClick:Ee,children:wt("DialogUnpin")}),me&&(0,N.Y)($.A,{icon:"gifs",onClick:We,children:wt("lng_context_save_gif")}),pe&&(0,N.Y)($.A,{icon:"revote",onClick:Xe,children:wt("lng_polls_retract")}),ge&&(0,N.Y)($.A,{icon:"stop",onClick:Ze,children:wt("lng_polls_stop")}),he&&(0,N.Y)($.A,{icon:"download",onClick:Ve,children:wt(Ce?"lng_context_cancel_download":"lng_media_download")}),ae&&(0,N.Y)($.A,{icon:"forward",onClick:Be,children:wt("Forward")}),ue&&(0,N.Y)($.A,{icon:"select",onClick:$e,children:wt("Common.Select")}),se&&(0,N.Y)($.A,{icon:"flag",onClick:_e,children:wt("lng_context_report_msg")}),ie&&(0,N.Y)($.A,{destructive:!0,icon:"delete",onClick:Oe,children:wt("Delete")}),Ne&&(0,N.FD)(N.FK,{children:[(0,N.Y)(J.A,{size:"thick"}),!Me&&(0,N.FD)(N.FK,{children:[(0,N.Y)(z.A,{inline:!0,className:"menu-loading-row"}),(0,N.Y)(z.A,{inline:!0,className:"menu-loading-row"})]}),Me&&1===Me.length&&(0,N.Y)($.A,{withWrap:!0,onClick:Vt,className:"menu-custom-emoji-sets",children:(0,x.A)(wt("MessageContainsEmojiPack",Me[0].title),["simple_markdown","emoji"])}),Me&&Me.length>1&&(0,N.Y)($.A,{withWrap:!0,onClick:Vt,className:"menu-custom-emoji-sets",children:(0,x.A)(wt("MessageContainsEmojiPacks",Me.length),["simple_markdown"])})]}),(Ie||Se)&&(0,N.FD)(N.FK,{children:[(0,N.Y)(J.A,{size:Ne?"thin":"thick"}),(0,N.FD)($.A,{icon:Se?"heart-outline":"group",onClick:Se?et:Qe,disabled:!Se&&!Ht,children:[(0,N.Y)("span",{className:"MessageContextMenu--seen-by-label-wrapper",children:(0,N.Y)("span",{className:"MessageContextMenu--seen-by-label",dir:wt.isRtl?"rtl":void 0,children:Se&&l.reactors?.count?Ie&&Ht?wt("Chat.OutgoingContextMixedReactionCount",[l.reactors.count,Ht]):wt("Chat.ContextReactionCount",l.reactors.count,"i"):1===Ht&&Re?(0,x.A)((0,h.L8)(Re[0].id)?(0,c.Yg)(Re[0]):Re[0].title):Ht?wt("Conversation.ContextMenuSeen",Ht,"i"):wt("Conversation.ContextMenuNoViews")})}),(0,N.Y)(_.A,{className:"avatars",size:"micro",peers:Re})]})]}),(xe||Ye||kt)&&(0,N.Y)(J.A,{size:Ne?"thin":"thick"}),(xe||Ye)&&(0,N.Y)(X,{canLoadReadDate:xe,shouldRenderShowWhen:Ye,message:l,closeContextMenu:je}),kt&&(0,N.Y)(G,{message:l})]})]})}),Q=window.getSelection(),ee=-1,te=(0,o.ph)((0,i.EK)((e,{message:t,messageListType:n,detectedLanguage:o})=>{const{threadId:i}=(0,r.Xf0)(e)||{},{defaultTags:a,topReactions:l,availableReactions:d}=e.reactions,u=(0,r.yuw)(e),m=(0,r.hds)(e,t.chatId),p=m&&(0,h.L8)(m.id),g=p?void 0:(0,r.AWZ)(e,t.chatId),A=(0,r.mBe)(e,t.chatId),f=A&&(0,c.Yg)(A),{seenByExpiresAt:v,seenByMaxChatMembers:C,maxUniqueReactions:y,readDateExpiresAt:I}=e.appConfig,S=g?.reactionsLimit||y,{noOptions:w,canReplyGlobally:R,canPin:N,canUnpin:M,canDelete:b,canReport:k,canEdit:Y,canFaveSticker:x,canUnfaveSticker:P,canCopy:T,canCopyLink:D,canSelect:F,canDownload:L,canSaveGif:E,canRevote:B,canClosePoll:O}=i&&(0,r.WAX)(e,t,i)||{},K=(0,r.R4s)(e,t),_=p?(0,r.K0y)(e,m.id):void 0,U=(0,c.Ie)(t),$=m&&(0,r.yps)(e,m.id),J=Boolean($),z=(0,r.Jbz)(e,t),j=Boolean(p&&U&&!J&&!z&&I&&t.date>Date.now()/1e3-I&&!_?.isReadDateRestricted&&"scheduled"!==n),H=Boolean(j&&p&&(0,r.K0y)(e,m.id)?.isReadDateRestrictedByMe),q="pinned"===n,G="scheduled"===n,V=m&&(0,c.WX)(m),W=i&&(0,r.Vw0)(e,t.chatId,i),X=Boolean(W&&!W?.isCommentsInfo&&W?.fromChannelId),Z=i?(0,r.S0q)(e,t.chatId,i):void 0,Q=m&&!(0,c.Sq)(m,"sendPlain",g),ee=!(!m||!i)&&(0,c.__)(m,Z,X,g)&&Q,te=(0,c.Nb)(t),ne=(0,c.G5)(t),oe=Boolean(!te&&m&&!m.isMonoforum&&!z&&C&&v&&(0,c.YE)(m)&&U&&!G&&m.membersCount&&m.membersCount<=C&&t.date>Date.now()/1e3-v),ie=(0,c._P)(t),ae=!te&&!V&&!G&&!ie&&!p&&t.reactions&&!(0,c.G)(t.reactions)&&t.reactions.canSeeList,se=(0,r.ynf)(e,t),ce=Boolean(t.content.contact),re=(0,r.g29)(e),le=(0,r.S1W)(e,t),de=le?.map(t=>(0,r.ycM)(e,t)),ue=de?.every(Boolean)?de:void 0,he=(0,r.Rny)(e,t.chatId,t.id),me=he?Boolean((0,r.a_$)(e,t.chatId,he)[t.id]?.text):void 0,pe=!me&&(0,r.S86)(e,t,o),ge=(0,r.qZq)(e,t.chatId),Ae=(0,r.nZ4)(e,t.chatId),fe=(0,r.zcZ)(e,t),ve=(0,r.Pn$)(e,t),Ce=t.content.storyData,ye=Ce?(0,r.Msb)(e,Ce.peerId,Ce.id):void 0,Ie=(0,r.X2D)(e,t.chatId),Se=(0,r.QP5)(e,t),we=e.appConfig.todoItemsMax;return{threadId:i,chat:m,availableReactions:d,topReactions:l,defaultTagReactions:a,noOptions:w,canReport:k,canSendNow:G,canReschedule:G,canReply:!q&&!G&&R,canPin:!G&&N,canUnpin:!G&&M,canDelete:b,canEdit:!q&&Y,canAppendTodoList:t.content.todo?.todo.othersCanAppend&&t.content.todo?.todo.items?.length<we,canForward:!G&&K,canFaveSticker:!G&&x,canUnfaveSticker:!G&&P,canCopy:ce||!se&&T,canCopyLink:!G&&D,canSelect:F,canDownload:!se&&L,canSaveGif:!se&&E,canRevote:B,canClosePoll:!G&&O,activeDownloads:u,canShowSeenBy:oe,canLoadReadDate:j,shouldRenderShowWhen:H,enabledReactions:m?.isForbidden?void 0:g?.enabledReactions,reactionsLimit:S,isPrivate:p,isCurrentUserPremium:re,hasFullInfo:Boolean(g),canShowReactionsCount:ae,canShowReactionList:!(te||ie||G||m?.id===s.zv8||ne),canBuyPremium:!re&&!(0,r.n_C)(e),customEmojiSetsInfo:le,customEmojiSets:ue,canScheduleUntilOnline:(0,r.RBq)(e,t.chatId),canTranslate:pe,canShowOriginal:me&&!ge,canSelectLanguage:me&&!ge,isMessageTranslated:me,canPlayAnimatedEmojis:(0,r.BWX)(e),isReactionPickerOpen:(0,r.Ani)(e),isInSavedMessages:Ae,isChannel:V,canReplyInChat:ee,isWithPaidReaction:g?.isPaidReactionAvailable,poll:fe,story:ye,userFullName:f,canGift:Ie,savedDialogId:Se,webPage:ve,isInFocusList:(0,r.FwB)(e,t.chatId,t.id)}})(({threadId:e,availableReactions:t,topReactions:n,defaultTagReactions:r,isOpen:h,messageListType:m,message:p,customEmojiSetsInfo:g,customEmojiSets:w,album:R,poll:k,webPage:Y,story:x,anchor:P,targetHref:T,noOptions:D,canSendNow:F,hasFullInfo:L,canReschedule:E,canReply:B,canPin:O,repliesThreadInfo:K,canUnpin:_,canDelete:U,canShowReactionsCount:$,chat:J,canReport:z,canShowReactionList:j,canEdit:H,canAppendTodoList:q,enabledReactions:G,reactionsLimit:V,isPrivate:W,isCurrentUserPremium:X,canForward:te,canBuyPremium:ne,canFaveSticker:oe,canUnfaveSticker:ie,canCopy:ae,canCopyLink:se,canSelect:ce,canDownload:re,canSaveGif:le,canRevote:de,canClosePoll:ue,canPlayAnimatedEmojis:he,canLoadReadDate:me,shouldRenderShowWhen:pe,activeDownloads:ge,noReplies:Ae,canShowSeenBy:fe,canScheduleUntilOnline:ve,canTranslate:Ce,isMessageTranslated:ye,canShowOriginal:Ie,canSelectLanguage:Se,isReactionPickerOpen:we,isInSavedMessages:Re,canReplyInChat:Ne,isWithPaidReaction:Me,userFullName:be,canGift:ke,className:Ye,savedDialogId:xe,isInFocusList:Pe,onClose:Te,onCloseAnimationEnd:De})=>{const{openThread:Fe,updateDraftReplyInfo:Le,setEditingId:Ee,pinMessage:Be,openForwardMenu:Oe,openReplyMenu:Ke,faveSticker:_e,unfaveSticker:Ue,toggleMessageSelection:$e,sendScheduledMessages:Je,rescheduleMessage:ze,downloadMedia:je,cancelMediaDownload:He,loadSeenBy:qe,openSeenByModal:Ge,openReactorListModal:Ve,loadFullChat:We,loadReactors:Xe,copyMessagesByIds:Ze,saveGif:Qe,loadStickers:et,cancelPollVote:tt,closePoll:nt,toggleReaction:ot,requestMessageTranslation:it,showOriginalMessage:at,openChatLanguageModal:st,openMessageReactionPicker:ct,openPremiumModal:rt,loadOutboxReadDate:lt,copyMessageLink:dt,openDeleteMessageModal:ut,addLocalPaidReaction:ht,openPaidReactionModal:mt,reportMessages:pt,openTodoListModal:gt,showNotification:At,forwardToSavedMessages:ft,deleteMessages:vt,addToFocusList:Ct,removeFromFocusList:yt,toggleFocusList:It}=(0,i.ko)(),St=(0,y.A)(),wt=(0,v.A)(),{ref:Rt}=(0,S.A)({isOpen:h,onCloseAnimationEnd:De,className:!1}),[Nt,Mt]=(0,o.J0)(!0),[bt,kt]=(0,o.J0)(!1),[Yt,xt,Pt]=(0,f.A)(),[Tt,Dt]=(0,o.J0)(ee),[Ft,Lt]=(0,I.A)(ve,Te,p.date),[Et,Bt]=(0,I.A)(!1,Te,p.date,!0),Ot=void 0===g||Boolean(g.length);(0,o.vJ)(()=>{fe&&h&&qe({chatId:p.chatId,messageId:p.id})},[qe,h,p.chatId,p.id,fe]),(0,o.vJ)(()=>{me&&h&&lt({chatId:p.chatId,messageId:p.id})},[me,h,p.chatId,p.id,p.readDate]),(0,o.vJ)(()=>{$&&h&&Xe({chatId:p.chatId,messageId:p.id})},[$,h,Xe,p.chatId,p.id]),(0,o.vJ)(()=>{g?.length&&w?.length!==g.length&&g.forEach(e=>{et({stickerSetInfo:e})})},[g,w,et]),(0,o.vJ)(()=>{L||W||!h||We({chatId:p.chatId})},[L,h,W,We,p.chatId]);const Kt=(0,o.Kr)(()=>{const e=(0,i.mS)().chats.byId,t=(0,i.mS)().users.byId;if(p.reactions?.recentReactions?.length){const n=new Set(p.reactions?.recentReactions?.map(({peerId:n})=>t[n]||e[n]));return Array.from(n).filter(Boolean).slice(0,s.dqH)}if(p.seenByDates)return Object.keys(p.seenByDates).slice(0,s.dqH).map(n=>t[n]||e[n]).filter(Boolean)},[p.reactions?.recentReactions,p.seenByDates]),_t=(0,o.Kr)(()=>{const e=(0,i.mS)();if(R)return R.messages.some(t=>{const n=(0,l.iS)(e,t);return!!n&&(0,c.$r)(ge,n)});const t=(0,l.iS)(e,p);return!!t&&(0,c.$r)(ge,t)},[ge,R,p]),Ut=B&&Q?.rangeCount?Q.getRangeAt(0):void 0;(0,o.vJ)(()=>{if(ye)return void Dt(ee);if(!Ut||Ut.collapsed||!Boolean(p.content.text?.text)||!function(e){const t=e.commonAncestorContainer,n=t.nodeType===Node.TEXT_NODE?t.parentNode:t;return Boolean(n.closest(".message-content-wrapper .text-content"))&&!(Boolean(n.closest(".EmbeddedMessage"))||Boolean(n.closest(".WebPage")))}(Ut))return void Dt(ee);const e=A(Ut),t=p.content.text.text.replace(/\u00A0/g," ");e.text.trim().length>0&&t.includes(e.text)?Dt(Ut.startOffset):Dt(ee)},[Ut,Ut?.collapsed,Ut?.startOffset,Ut?.endOffset,ye,p.content.text]);const $t=(0,C.A)(()=>{Mt(!1),Te()}),Jt=(0,C.A)(()=>{Mt(!1),$t();const e=R?.messages?R.messages.map(({id:e})=>e):[p.id];ut({chatId:p.chatId,messageIds:e,isSchedule:"scheduled"===m})}),zt=(0,C.A)(()=>{$t(),Ct({chatId:p.chatId,messageId:p.id}),It({force:!0})}),jt=(0,C.A)(()=>{$t(),yt({chatId:p.chatId,messageId:p.id})}),Ht=(0,C.A)(()=>{kt(!1),Te()}),qt=(0,C.A)(()=>{const e=Tt!==ee&&Ut?A(Ut):void 0;Ne?Le({replyToMsgId:p.id,quoteText:e,quoteOffset:Tt,monoforumPeerId:xe,replyToPeerId:void 0}):Ke({fromChatId:p.chatId,messageId:p.id,quoteText:e,quoteOffset:Tt}),$t()}),Gt=(0,C.A)(()=>{Fe({chatId:p.chatId,threadId:p.id}),$t()}),Vt=(0,C.A)(()=>{p.content.todo?gt({chatId:p.chatId,messageId:p.id}):Ee({messageId:p.id}),$t()}),Wt=(0,C.A)(()=>{X?gt({chatId:p.chatId,messageId:p.id,forNewTask:!0}):At({message:wt("SubscribeToTelegramPremiumForAppendToDo"),action:{action:"openPremiumModal",payload:{initialSection:"todo"}},actionText:St("PremiumMore")}),$t()}),Xt=(0,C.A)(()=>{Mt(!1),kt(!0)}),Zt=(0,C.A)(()=>{Be({chatId:p.chatId,messageId:p.id,isUnpin:!0}),$t()}),Qt=(0,C.A)(()=>{$t();const e=R?.messages?R.messages.map(({id:e})=>e):[p.id];Oe({fromChatId:p.chatId,messageIds:e}),ft(),setTimeout(()=>{vt({messageIds:e,shouldDeleteForAll:!1})},100)}),en=(0,C.A)(()=>{if($t(),R?.messages){const e=R.messages.map(({id:e})=>e);Oe({fromChatId:p.chatId,messageIds:e})}else Oe({fromChatId:p.chatId,messageIds:[p.id]})}),tn=(0,C.A)(()=>{$t(),_e({sticker:p.content.sticker})}),nn=(0,C.A)(()=>{$t(),Ue({sticker:p.content.sticker})}),on=(0,C.A)(()=>{$t(),tt({chatId:p.chatId,messageId:p.id})}),an=(0,C.A)(()=>{$t(),nt({chatId:p.chatId,messageId:p.id})}),sn=(0,C.A)(()=>{const e=R?.messages?{messageId:p.id,childMessageIds:R.messages.map(({id:e})=>e),withShift:!1}:{messageId:p.id,withShift:!1};$e(e),$t()}),cn=(0,C.A)(()=>{Je({chatId:p.chatId,id:p.id}),$t()}),rn=(0,C.A)(e=>{ze({chatId:p.chatId,messageId:p.id,scheduledAt:e}),Te()}),ln=(0,C.A)(()=>{Mt(!1),Ft(rn)}),dn=(0,C.A)(e=>{ft({scheduledAt:e}),Te()}),un=(0,C.A)(()=>{const e=R?.messages?R.messages.map(({id:e})=>e):[p.id];Oe({fromChatId:p.chatId,messageIds:e,isRemindMe:!0}),Mt(!1),Et(dn)}),hn=(0,C.A)(()=>{$t(),Ge({chatId:p.chatId,messageId:p.id})}),mn=(0,C.A)(()=>{$t(),Ve({chatId:p.chatId,messageId:p.id})}),pn=(0,C.A)(e=>{Ze({messageIds:e}),$t()}),gn=(0,C.A)(()=>{dt({chatId:p.chatId,messageId:p.id,shouldIncludeThread:e!==a.l3,shouldIncludeGrouped:!0}),$t()}),An=(0,C.A)(()=>{(0,u.eM)(p.content.contact.phoneNumber),$t()}),fn=(0,C.A)(()=>{const e=(0,i.mS)();(R?.messages||[p]).forEach(t=>{const n=(0,l.iS)(e,t);n&&(_t?He({media:n}):je({media:n,originMessage:t}))}),$t()}),vn=(0,C.A)(()=>{const e=(0,c.zX)(p);Qe({gif:e}),$t()}),Cn=(0,C.A)(e=>{Re&&!X?rt({initialSection:"saved_tags"}):ot({chatId:p.chatId,messageId:p.id,reaction:e,shouldAddToRecent:!0}),$t()}),yn=(0,C.A)(()=>{ht({chatId:p.chatId,messageId:p.id,count:1}),$t()}),In=(0,C.A)(()=>{mt({chatId:p.chatId,messageId:p.id}),$t()}),Sn=(0,C.A)(e=>{ct({chatId:p.chatId,messageId:p.id,position:e})}),wn=(0,C.A)(()=>{it({chatId:p.chatId,id:p.id}),$t()}),Rn=(0,C.A)(()=>{at({chatId:p.chatId,id:p.id}),$t()}),Nn=(0,C.A)(()=>{st({chatId:p.chatId,messageId:p.id}),$t()}),Mn=(0,o.Kr)(()=>(R?R.messages:[p]).map(({id:e})=>e),[R,p]),bn=(0,C.A)(()=>{J&&(Mt(!1),Te(),pt({chatId:J.id,messageIds:Mn}))});if(D)return void $t();const kn=new Date;return kn.setFullYear(kn.getFullYear()+1),(0,N.FD)("div",{ref:Rt,className:(0,d.A)("ContextMenuContainer",Ye),children:[(0,N.Y)(Z,{isReactionPickerOpen:we,availableReactions:t,topReactions:n,defaultTagReactions:r,isWithPaidReaction:Me,message:p,isPrivate:W,isCurrentUserPremium:X,canBuyPremium:ne,isOpen:Nt,enabledReactions:G,reactionsLimit:V,anchor:P,targetHref:T,canShowReactionsCount:$,canShowReactionList:j,canSendNow:F,canReschedule:E,canReply:B,canQuote:Tt!==ee,canDelete:U,canPin:O,canReport:z,repliesThreadInfo:K,canUnpin:_,canEdit:H,canAppendTodoList:q,canForward:te,canFaveSticker:oe,canUnfaveSticker:ie,canCopy:ae,canCopyLink:se,canSelect:ce,canDownload:re,canSaveGif:le,canRevote:de,canClosePoll:ue,canShowSeenBy:fe,canTranslate:Ce,canShowOriginal:Ie,canSelectLanguage:Se,canPlayAnimatedEmojis:he,shouldRenderShowWhen:pe,canLoadReadDate:me,hasCustomEmoji:Ot,customEmojiSets:w,isDownloading:_t,seenByRecentPeers:Kt,isInSavedMessages:Re,noReplies:Ae,poll:k,webPage:Y,story:x,onOpenThread:Gt,onReply:qt,onEdit:Vt,onAppendTodoList:Wt,onPin:Xt,onUnpin:Zt,onForward:en,onDelete:Jt,onReport:bn,onFaveSticker:tn,onUnfaveSticker:nn,onSelect:sn,onSend:cn,onReschedule:ln,onClose:$t,onCopyLink:gn,onCopyMessages:pn,onCopyNumber:An,onDownload:fn,onSaveGif:vn,onCancelVote:on,onClosePoll:xt,onShowSeenBy:hn,onToggleReaction:Cn,onSendPaidReaction:yn,onShowPaidReactionModal:In,onShowReactors:mn,onReactionPickerOpen:Sn,onTranslate:wn,onShowOriginal:Rn,onSelectLanguage:Nn,onMoveToBottom:Qt,onAddToFocus:zt,onRemoveFromFocus:jt,userFullName:be,canGift:ke,isInFocusList:Pe,onRemindMe:un}),(0,N.Y)(M,{isOpen:bt,messageId:p.id,chatId:p.chatId,onClose:Ht}),(0,N.Y)(b.A,{isOpen:Yt,onClose:Pt,text:St("lng_polls_stop_warning"),confirmLabel:St("lng_polls_stop_sure"),confirmHandler:an}),E&&Lt,te&&Bt]})}))}}]);
//# sourceMappingURL=3938.25924e30185ff318e044.js.map